<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditions Portal - Complete Feature Specifications (35 Tickets)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
            padding: 20px;
            line-height: 1.6;
            color: #e6e8eb;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: #1e2333;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .breadcrumb {
            background: #252b3b;
            padding: 15px 40px;
            border-bottom: 1px solid #3d4557;
            font-size: 0.9em;
        }

        .breadcrumb a {
            color: #8b9eff;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #a8b4ff;
            text-decoration: underline;
        }

        .breadcrumb .separator {
            margin: 0 10px;
            color: #5a6070;
        }

        .breadcrumb .current {
            color: #c8cdd8;
        }

        .content {
            padding: 40px;
        }

        .toc {
            background: #252b3b;
            border: 2px solid #3d4557;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .toc h2 {
            color: #8b9eff;
            margin-bottom: 20px;
        }

        .toc-section {
            margin-bottom: 20px;
        }

        .toc-section h3 {
            color: #a8b4ff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .toc-list {
            list-style: none;
            padding-left: 20px;
        }

        .toc-list li {
            margin-bottom: 8px;
        }

        .toc-list a {
            color: #8b9eff;
            text-decoration: none;
            font-weight: 500;
        }

        .toc-list a:hover {
            text-decoration: underline;
            color: #a8b4ff;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            color: #8b9eff;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #8b9eff;
        }

        .feature-section {
            background: #252b3b;
            border: 2px solid #3d4557;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .feature-section h3 {
            color: #8b9eff;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .feature-section h4 {
            color: #a8b4ff;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }

        .feature-section p, .feature-section ul, .feature-section li {
            color: #b8bcc8;
        }

        .feature-section strong {
            color: #e6e8eb;
        }

        .meta-info {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3d4557;
        }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .badge-platform { background: #9c27b0; color: white; }
        .badge-role { background: #ff9800; color: white; }
        .badge-feature { background: #20c997; color: white; }
        .badge-small { background: #28a745; color: white; }
        .badge-medium { background: #ffc107; color: #333; }
        .badge-large { background: #dc3545; color: white; }

        .screenshot-ref {
            background: #2d3348;
            border-left: 5px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            border: 1px solid #3d4557;
        }

        .screenshot-ref strong {
            color: #8b9eff;
        }

        .screenshot-ref p {
            color: #b8bcc8;
        }

        .screenshot-ref img {
            max-width: 100%;
            border: 2px solid #3d4557;
            border-radius: 8px;
            margin-top: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            background: #252b3b;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #3d4557;
            color: #b8bcc8;
        }

        td strong {
            color: #e6e8eb;
        }

        tr:hover {
            background: #2d3348;
        }

        .acceptance-criteria {
            background: #1e3a2e;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #3d4557;
        }

        .acceptance-criteria h4 {
            color: #4ade80;
        }

        .acceptance-criteria ul {
            list-style: none;
            padding-left: 0;
        }

        .acceptance-criteria li {
            margin-bottom: 12px;
            padding-left: 30px;
            position: relative;
            color: #b8bcc8;
        }

        .acceptance-criteria li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4ade80;
            font-weight: bold;
            font-size: 1.2em;
        }

        .acceptance-criteria strong {
            color: #e6e8eb;
        }

        .api-endpoint {
            background: #181d29;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            border: 1px solid #2d3548;
        }

        .api-method {
            color: #569cd6;
        }

        .api-path {
            color: #ce9178;
        }

        ul, ol {
            margin-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Conditions Portal - Complete Feature Specifications</h1>
            <p style="margin-top: 10px;">All 35 Tickets with Full Acceptance Criteria & Screenshot References</p>
            <p style="margin-top: 5px; font-size: 0.9em;">POC URL: https://conditions-portal-pr-ahby.bolt.host/</p>
        </div>

        <div class="breadcrumb">
            <a href="/dashboard.html">üè† Dashboard</a>
            <span class="separator">‚Üí</span>
            <a href="/tracts/index.html">Tracts</a>
            <span class="separator">‚Üí</span>
            <span class="current">Detailed Features</span>
        </div>

        <div class="content">
            <!-- Table of Contents -->
            <div class="toc">
                <h2>Table of Contents - All 35 Tickets</h2>

                <div class="toc-section">
                    <h3>TIER 1: Platform Foundation (1 ticket)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-001">CP-001: Conditions Grid Platform (Read-Only)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 2: Role Scaffolding (3 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-100">CP-100: Processor Role Shell</a></li>
                        <li><a href="#cp-200">CP-200: Underwriter Role Shell</a></li>
                        <li><a href="#cp-300">CP-300: Borrower Role Shell</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Processor Features (18 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-101">CP-101: Add Document Request with Rich Text</a></li>
                        <li><a href="#cp-102">CP-102: Edit Condition - Full CRUD</a></li>
                        <li><a href="#cp-103">CP-103: Add Conditions from Template Library</a></li>
                        <li><a href="#cp-104">CP-104: Filter by Status (Processor View)</a></li>
                        <li><a href="#cp-105">CP-105: Search Conditions (Real-time)</a></li>
                        <li><a href="#cp-106">CP-106: Bulk Selection & Actions</a></li>
                        <li><a href="#cp-107">CP-107: Collapse/Expand Stage Groups</a></li>
                        <li><a href="#cp-108">CP-108: Add/Edit Condition Notes (Inline)</a></li>
                        <li><a href="#cp-109">CP-109: Set Flag on Condition (Personal)</a></li>
                        <li><a href="#cp-110">CP-110: Exception Request Management</a></li>
                        <li><a href="#cp-111">CP-111: Condition Dates (Expiration & Follow-Up)</a></li>
                        <li><a href="#cp-112">CP-112: Status History Timeline</a></li>
                        <li><a href="#cp-113">CP-113: Update Loan Status with Submission Notes</a></li>
                        <li><a href="#cp-114">CP-114: Add Documents to Condition (Dual Source)</a></li>
                        <li><a href="#cp-115">CP-115: View Outstanding Document Requests</a></li>
                        <li><a href="#cp-116">CP-116: Create Custom Condition Template</a></li>
                        <li><a href="#cp-117">CP-117: Save/Manage "My Lists"</a></li>
                        <li><a href="#cp-118">CP-118: Real-time Count Badges Update</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Underwriter Features (4 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-201">CP-201: Clear Condition (Underwriter)</a></li>
                        <li><a href="#cp-202">CP-202: Reject Condition (Underwriter)</a></li>
                        <li><a href="#cp-203">CP-203: Request Additional Info (UW to Processor)</a></li>
                        <li><a href="#cp-204">CP-204: Escalate Condition for Review (Underwriter)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Borrower Features (4 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-301">CP-301: View Required Documents List (Borrower)</a></li>
                        <li><a href="#cp-302">CP-302: Upload Documents for Condition (Borrower)</a></li>
                        <li><a href="#cp-303">CP-303: Track Condition Status & Timeline (Borrower)</a></li>
                        <li><a href="#cp-304">CP-304: Receive Notifications for Updates (Borrower)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Cross-Cutting Features (5 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-400">CP-400: Activity History & Audit Log</a></li>
                        <li><a href="#cp-401">CP-401: Email & SMS Notifications</a></li>
                        <li><a href="#cp-402">CP-402: Export Conditions Report (PDF/Excel)</a></li>
                        <li><a href="#cp-403">CP-403: CLEAR Docs System Integration</a></li>
                        <li><a href="#cp-404">CP-404: Byte API Integration (Loan Data Sync)</a></li>
                    </ul>
                </div>
            </div>

            <!-- POC OVERVIEW & TESTING SCENARIOS -->
            <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0; border: 1px solid #3d4557;">
                <h2 style="color: white; margin-bottom: 20px;">üéØ POC Overview & Testing Scenarios</h2>

                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: white; margin-bottom: 15px;">Scenario Selector (Loan Selection Window)</h3>
                    <p style="margin-bottom: 15px; line-height: 1.6;">
                        <strong>Important:</strong> The "Select Loan" window in the POC is actually a <strong>scenario selector</strong>
                        that allows you to test different workflow scenarios with pre-staged data. This enables you to quickly see what
                        an underwriter or processor experiences at different stages of the loan conditions workflow.
                    </p>

                    <h4 style="color: white; margin: 15px 0 10px 0;">üì∏ Screenshot Reference:</h4>
                    <div style="background: #1e2333; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #3d4557;">
                        <img src="./conditions-portal-screenshot-06-select-loan.png"
                             alt="Scenario Selector - Pre-staged workflow scenarios"
                             style="max-width: 100%; height: auto; border-radius: 4px; border: 2px solid #3d4557;" />
                        <p style="color: #b8bcc8; margin-top: 8px; font-size: 0.9em; font-style: italic;">
                            Screenshot 06: Loan/Scenario Selector with pre-configured test data
                        </p>
                    </div>

                    <h4 style="color: white; margin: 15px 0 10px 0;">Available Test Scenarios:</h4>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Processor Workflow</strong> - Loan with conditions at various processor stages (Need to Request, Requested, Review Docs)</li>
                        <li><strong>Underwriter Workflow</strong> - Loan with conditions ready for underwriter review and approval</li>
                        <li><strong>Mixed Status Scenarios</strong> - Loans with conditions at multiple stages simultaneously</li>
                        <li><strong>Complete Workflow</strong> - Loan showing full lifecycle from New ‚Üí Cleared</li>
                        <li><strong>Exception Scenarios</strong> - Loans with exception requests and edge cases</li>
                    </ul>

                    <h4 style="color: white; margin: 15px 0 10px 0;">How to Use the Scenario Selector:</h4>
                    <ol style="margin-left: 20px; line-height: 1.8;">
                        <li>Click the <strong>"Select Loan"</strong> dropdown in the POC header</li>
                        <li>Choose a scenario that matches the workflow you want to test</li>
                        <li>The grid will load with pre-staged conditions matching that scenario</li>
                        <li>Switch roles (Processor/Underwriter) to see role-specific views of the same data</li>
                        <li>Test all features and interactions with realistic, pre-configured data</li>
                    </ol>

                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.1);">
                        <p style="margin: 0; line-height: 1.6;">
                            <strong>üí° Implementation Note:</strong> This scenario selector mechanism is a POC-only feature for testing.
                            In production, loans will be loaded dynamically based on user role and actual loan data from the Byte API.
                            However, the concept of "test scenarios" could be valuable for QA/staging environments to enable
                            comprehensive workflow testing.
                        </p>
                    </div>
                </div>

                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: white; margin-bottom: 15px;">Role-Based Views</h3>
                    <p style="margin-bottom: 15px; line-height: 1.6;">
                        The POC demonstrates role-based access control by showing different UI elements and filter options
                        based on the selected role:
                    </p>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Processor View:</strong> 5 filter pills (Active, Need to Request, Requested, Send Brw Requests, Review Docs) - Screenshot 07, 08</li>
                        <li><strong>Underwriter View:</strong> 2 filter pills (Active, Review Docs) - Screenshot 19</li>
                        <li><strong>Role Switcher:</strong> Dropdown to toggle between roles and see different perspectives - Screenshot 07</li>
                    </ul>
                </div>
            </div>

            <!-- TIER 1: PLATFORM FOUNDATION -->
            <div class="section">
                <h2 class="section-title">TIER 1: Platform Foundation</h2>

                <div class="feature-section" id="cp-001">
                    <h3>CP-001: Conditions Grid Platform (Read-Only)</h3>

                    <div class="meta-info">
                        <span class="badge badge-platform">Platform</span>
                        <span class="badge badge-large">Size: Large (8+ hours)</span>
                        <span class="badge">Depends On: None</span>
                        <span class="badge">Blocks: CP-100, CP-200, CP-300, CP-400</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 01: Main Grid View</p>
                        <img src="./conditions-portal-screenshot-01.png" alt="Main Grid View" />
                    </div>

                    <h4>Overview</h4>
                    <p>The foundational grid component that displays all conditions for a loan, grouped by stage (SUSP, PTD, PTF, PTP, POST, TRAIL). This is a read-only view that establishes the core UI framework, data models, and API contracts for the entire application.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Grid component with virtual scrolling for performance</li>
                        <li>Stage grouping headers with expand/collapse functionality</li>
                        <li>Column headers: Checkbox, Category, Condition Description, Status, Notes, Doc Requests, Docs</li>
                        <li>Bulk selection checkboxes on each row</li>
                        <li>Filter pills container (placeholder for role-specific filters)</li>
                        <li>Search box container</li>
                        <li>Action buttons panel (placeholder)</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>id</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Format: CATEGORY-NUMBER (e.g., "CLSNG-001")</td>
                            </tr>
                            <tr>
                                <td>category</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 20+ categories (APP, DISC, CRED, INC, ASSET, etc.)</td>
                            </tr>
                            <tr>
                                <td>number</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>3-digit number, system-generated</td>
                            </tr>
                            <tr>
                                <td>name</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 200 characters</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 1000 characters</td>
                            </tr>
                            <tr>
                                <td>status</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 7 statuses: New, Need Brw Request, Requested, Processor to Review, Ready for UW, Cleared, Not Cleared</td>
                            </tr>
                            <tr>
                                <td>stage</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 6 stages: SUSP, PTD, PTF, PTP, POST, TRAIL</td>
                            </tr>
                            <tr>
                                <td>class</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"UW" or "Processor III"</td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"INT" (Internal) or "BRW" (Borrower)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions</span>

<strong>Response:</strong>
{
  "loanId": "2024-001234",
  "conditions": [
    {
      "id": "CLSNG-001",
      "category": "CLSNG",
      "number": "001",
      "name": "Final Closing Disclosure",
      "description": "Final Closing Disclosure reviewed and signed",
      "status": "New",
      "stage": "PTF",
      "class": "Processor III",
      "type": "INT",
      "addedBy": "System",
      "createdDate": "2026-01-08T12:26:00Z",
      "statusHistory": [...],
      "notes": [],
      "documentRequests": [],
      "documents": []
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Grid displays all conditions grouped by stage</li>
                            <li>Read-only view (no mutations possible)</li>
                            <li>API integration complete and functional</li>
                            <li>Responsive layout works on desktop (1920px to 1280px)</li>
                            <li>Loads within 2 seconds for 100+ conditions</li>
                            <li>Virtual scrolling implemented for performance</li>
                            <li>Stage groups show accurate condition counts</li>
                            <li>Conditions display correct status badges with color coding</li>
                            <li>Checkbox selection state tracked correctly</li>
                            <li>All 7 columns render properly with correct data</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 2: ROLE SCAFFOLDING -->
            <div class="section">
                <h2 class="section-title">TIER 2: Role Scaffolding</h2>

                <div class="feature-section" id="cp-100">
                    <h3>CP-100: Processor Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-101 through CP-118</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 01: Main Grid View (Processor View)</p>
                        <p>Screenshot 07: Role Switcher</p>
                        <img src="./conditions-portal-screenshot-07.png" alt="Role Switcher" />
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Processor role view with specific filters and permission checks. This shell establishes the foundation for all processor-specific features (CP-101 through CP-118).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Processor-specific filter pills container (5 filters)</li>
                        <li>Action buttons panel with placeholder functionality</li>
                        <li>Role-based permission checks</li>
                        <li>Route: /processor/conditions</li>
                        <li>Role switcher dropdown in header</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>userRole</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"Processor III" (for this view)</td>
                            </tr>
                            <tr>
                                <td>filterPills</td>
                                <td>array</td>
                                <td>Yes</td>
                                <td>Exactly 5 pills: Active, Need to Request, Requested, Send Brw Requests, Review Docs</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions?role=processor</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to class="Processor III"],
  "filterCounts": {
    "active": 12,
    "needToRequest": 5,
    "requested": 8,
    "sendBrwRequests": 3,
    "reviewDocs": 7
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Processor view shows only conditions where class="Processor III"</li>
                            <li>5 filter pills visible: Active, Need to Request, Requested, Send Brw Requests, Review Docs</li>
                            <li>Each filter pill displays accurate count badge</li>
                            <li>Action panel renders but buttons are placeholders (no functionality yet)</li>
                            <li>Permission check prevents underwriter-only actions</li>
                            <li>Role switcher allows changing between Processor and Underwriter views</li>
                            <li>Grid filters correctly based on processor role</li>
                            <li>Route /processor/conditions is accessible</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-200">
                    <h3>CP-200: Underwriter Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-201 through CP-204</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 19: Underwriter View (2 filters vs 5)</p>
                        <img src="./conditions-portal-screenshot-19.png" alt="Underwriter View" />
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Underwriter role view with simplified filters focused on approval/rejection decisions. This shell establishes the foundation for all underwriter-specific features (CP-201 through CP-204).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Underwriter-specific filter pills container (2 filters only)</li>
                        <li>Decision action panel with placeholder functionality</li>
                        <li>Simplified UI focused on approval/rejection</li>
                        <li>Route: /underwriter/conditions</li>
                        <li>Role-based permission checks</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions?role=underwriter</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to class="UW"],
  "filterCounts": {
    "active": 8,
    "reviewDocs": 5
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter view shows only conditions where class="UW"</li>
                            <li>2 filter pills visible: Active, Review Docs</li>
                            <li>Simplified UI compared to Processor view</li>
                            <li>Decision panel placeholder renders</li>
                            <li>Permission check prevents processor-only actions</li>
                            <li>Route /underwriter/conditions is accessible</li>
                            <li>Grid filters correctly based on underwriter role</li>
                            <li>Count badges update correctly for underwriter filters</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-300">
                    <h3>CP-300: Borrower Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-301 through CP-304</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Borrower portal view with simplified, borrower-friendly language and mobile-responsive design. This shell establishes the foundation for all borrower-specific features (CP-301 through CP-304).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Borrower-facing portal view</li>
                        <li>Document upload area placeholder</li>
                        <li>Status timeline view</li>
                        <li>Route: /borrower/conditions</li>
                        <li>Mobile-responsive layout</li>
                        <li>Simplified language (no internal jargon)</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/borrowers/{borrowerId}/conditions</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to type="BRW"],
  "borrowerInfo": {
    "name": "Michael & Sarah Johnson",
    "loanNumber": "2024-001234"
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower sees only conditions marked type="BRW"</li>
                            <li>Simplified language used (no acronyms or internal jargon)</li>
                            <li>Upload placeholder visible in UI</li>
                            <li>Mobile-responsive (works on 320px to 768px viewports)</li>
                            <li>Route /borrower/conditions is accessible</li>
                            <li>Status timeline placeholder renders</li>
                            <li>Borrower-friendly labels and descriptions</li>
                            <li>No internal workflow details exposed to borrower</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 3: PROCESSOR FEATURES -->
            <div class="section">
                <h2 class="section-title">TIER 3: Processor Features (CP-101 to CP-118)</h2>

                <div class="feature-section" id="cp-101">
                    <h3>CP-101: Add Document Request with Rich Text</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 03: Add Document Request</p>
                        <p>Screenshot 04: Document Types Dropdown</p>
                        <img src="./conditions-portal-screenshot-03.png" alt="Add Document Request" />
                    </div>

                    <h4>Overview</h4>
                    <p>Allows processors to create document requests for specific conditions. Includes a rich text editor for custom descriptions, a dropdown of 16 predefined document types, and borrower selection.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Add request" button on each condition row</li>
                        <li>Modal: Add Document Request</li>
                        <li>Document Type dropdown (16 predefined types)</li>
                        <li>Request For selector (borrower names)</li>
                        <li>Rich text editor with formatting toolbar</li>
                        <li>Character counter (0/1000)</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>documentType</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 16 types: Appraisal, Asset Statements, Bank Statements, Employment Verification, Flood Insurance Binder, Gift Letter, Government ID, Hazard Insurance Binder, Homeowners Insurance, Mortgage Insurance, Pay Stubs, Purchase Agreement, Tax Returns, Title Insurance, W-2 Forms, Miscellaneous</td>
                            </tr>
                            <tr>
                                <td>requestFor</td>
                                <td>array</td>
                                <td>Yes</td>
                                <td>At least one borrower ID selected</td>
                            </tr>
                            <tr>
                                <td>descriptionForBorrower</td>
                                <td>string (HTML)</td>
                                <td>No</td>
                                <td>Max 1000 characters, supports Bold, Italic, Underline, Link</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/document-requests</span>

<strong>Request Body:</strong>
{
  "documentType": "Bank Statements",
  "requestFor": ["APP1"],
  "descriptionForBorrower": "&lt;p&gt;Please provide &lt;strong&gt;2 months&lt;/strong&gt; of bank statements.&lt;/p&gt;",
  "requestedBy": "user-id-123"
}

<strong>Response:</strong>
{
  "id": "doc-req-456",
  "conditionId": "CLSNG-001",
  "documentType": "Bank Statements",
  "requestedDate": "2026-01-15T10:30:00Z",
  "status": "Pending"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Modal opens when "Add request" clicked</li>
                            <li>Dropdown shows all 16 document types</li>
                            <li>Dropdown is searchable (filters as user types)</li>
                            <li>Rich text editor supports Bold, Italic, Underline, Link formatting</li>
                            <li>Character limit enforced at 1000 characters</li>
                            <li>Character counter updates in real-time</li>
                            <li>Request For field pre-populated with borrower names from loan</li>
                            <li>"Add" button disabled until Document Type is selected</li>
                            <li>Request created and appears in Outstanding Document Requests section</li>
                            <li>Condition status automatically updates to "Requested" when first doc request is created</li>
                            <li>Borrower receives email notification with request details</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-102">
                    <h3>CP-102: Edit Condition - Full CRUD</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 02: Edit Condition Modal</p>
                        <p>Screenshot 13: Edit Condition Expanded View</p>
                        <img src="./conditions-portal-screenshot-02.png" alt="Edit Condition Modal" />
                    </div>

                    <h4>Overview</h4>
                    <p>Comprehensive modal for editing all condition properties including name, description, status, stage, class, type, and managing associated accordion sections (Set Flag, Outstanding Document Requests, Exception Request, Dates, Status History, Condition Notes).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Click condition ID to open Edit Condition modal</li>
                        <li>Form fields: Name, Description, Category (disabled), Number (disabled), Status, Stage, Class, Type</li>
                        <li>Accordion sections: Set Flag, Outstanding Document Requests, Exception Request, Dates, Status History, Condition Notes</li>
                        <li>Save/Cancel buttons</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>name</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 200 characters</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 1000 characters</td>
                            </tr>
                            <tr>
                                <td>category</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>Read-only, system-generated</td>
                            </tr>
                            <tr>
                                <td>number</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Read-only, system-generated</td>
                            </tr>
                            <tr>
                                <td>status</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 7 statuses</td>
                            </tr>
                            <tr>
                                <td>stage</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 6 stages: SUSP, PTD, PTF, PTP, POST, TRAIL</td>
                            </tr>
                            <tr>
                                <td>class</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"UW" or "Processor III"</td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"INT" or "BRW"</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}</span>

<strong>Request Body:</strong>
{
  "name": "Updated Condition Name",
  "description": "Updated description",
  "status": "Ready for UW",
  "stage": "PTF",
  "class": "UW",
  "type": "INT"
}

<strong>Response:</strong>
{
  "id": "CLSNG-001",
  ...updated fields,
  "statusHistory": [...with new entry]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>All fields pre-populated from current condition data</li>
                            <li>Category and Number fields are disabled (read-only)</li>
                            <li>Status change records timestamp in statusHistory</li>
                            <li>Stage change moves condition to new stage group in grid</li>
                            <li>All accordion sections functional and expandable</li>
                            <li>Validation prevents empty required fields</li>
                            <li>Dates section shows "‚Äî" when dates are empty</li>
                            <li>Status History section displays all reached statuses with timestamps</li>
                            <li>Condition Notes section allows adding new notes</li>
                            <li>Cancel button closes modal without saving</li>
                            <li>Update button saves changes and refreshes grid</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-103">
                    <h3>CP-103: Add Conditions from Template Library</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (5-6 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 05: Add Conditions Modal</p>
                        <p>Screenshot 17: Add Conditions with My Lists</p>
                        <img src="./conditions-portal-screenshot-05.png" alt="Add Conditions Modal" />
                    </div>

                    <h4>Overview</h4>
                    <p>Comprehensive 3-panel modal for adding multiple conditions to a loan from a template library. Includes 20+ category filters, search functionality, custom condition creation, and "My Lists" for saved condition sets.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Add Conditions" button in header</li>
                        <li>Left panel: My Lists & Categories (20+ category buttons)</li>
                        <li>Middle panel: Available Conditions with search box</li>
                        <li>Right panel: Current Conditions (selected items)</li>
                        <li>"Custom" button to create new template</li>
                        <li>"Add" and "Remove" buttons for moving conditions between panels</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/condition-templates</span>

<strong>Query Params:</strong>
- category (optional): filter by category

<strong>Response:</strong>
{
  "templates": [
    {
      "id": "tmpl-001",
      "category": "CLSNG",
      "name": "Final Closing Disclosure",
      "description": "Final Closing Disclosure reviewed and signed",
      "defaultStage": "PTF",
      "defaultClass": "Processor III"
    },
    ...150+ templates
  ]
}

<span class="api-method">POST</span> <span class="api-path">/api/loans/{loanId}/conditions/bulk</span>

<strong>Request Body:</strong>
{
  "templateIds": ["tmpl-001", "tmpl-002", "tmpl-003"],
  "requestFor": ["APP1"]
}

<strong>Response:</strong>
{
  "created": [
    {...condition objects}
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Modal displays three panels: My Lists & Categories, Available Conditions, Current Conditions</li>
                            <li>Available Conditions panel loads and displays 150+ standard templates</li>
                            <li>Category filter works correctly (clicking category filters templates)</li>
                            <li>Search filters by name and description in real-time</li>
                            <li>Bulk add creates all conditions in single transaction</li>
                            <li>Current Conditions panel shows selected items with number, description, request for</li>
                            <li>"My Lists" section shows user's saved condition sets</li>
                            <li>Clicking a saved list loads those conditions into Current Conditions panel</li>
                            <li>"Custom" button opens custom condition creator</li>
                            <li>Add/Remove buttons work correctly between panels</li>
                            <li>Modal "Add" button creates all conditions and refreshes grid</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-104">
                    <h3>CP-104: Filter by Status (Processor View)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 12: Filter Pills Active State</p>
                        <img src="./conditions-portal-screenshot-12.png" alt="Filter Pills Active State" />
                    </div>

                    <h4>Overview</h4>
                    <p>5 filter pills with dynamic counts for the Processor view. Filters conditions by status categories: Active, Need to Request, Requested, Send Brw Requests, Review Docs.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>5 filter pills with dynamic counts</li>
                        <li>Visual highlighting on selected filter</li>
                        <li>Count badges calculated server-side</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Filter</th>
                                <th>Status Mapping</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Active</td>
                                <td>New, Processor to Review</td>
                                <td>Conditions currently being worked on</td>
                            </tr>
                            <tr>
                                <td>Need to Request</td>
                                <td>Need Brw Request</td>
                                <td>Conditions requiring document requests</td>
                            </tr>
                            <tr>
                                <td>Requested</td>
                                <td>Requested</td>
                                <td>Document requests sent to borrower</td>
                            </tr>
                            <tr>
                                <td>Send Brw Requests</td>
                                <td>(Custom logic)</td>
                                <td>Ready to send to borrower</td>
                            </tr>
                            <tr>
                                <td>Review Docs</td>
                                <td>(Has documents uploaded)</td>
                                <td>Documents received, awaiting review</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions/counts?role=processor</span>

<strong>Response:</strong>
{
  "active": 12,
  "needToRequest": 5,
  "requested": 8,
  "sendBrwRequests": 3,
  "reviewDocs": 7
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking filter pill filters grid to matching conditions</li>
                            <li>Count badges update in real-time</li>
                            <li>Active filter visually highlighted</li>
                            <li>Clicking same filter again clears filter</li>
                            <li>Filter state persists when switching between views</li>
                            <li>Counts accurate based on current condition statuses</li>
                            <li>Filter works in combination with search</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-105">
                    <h3>CP-105: Search Conditions (Real-time)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Real-time search functionality that filters conditions by name, description, ID, or category. Debounced at 300ms to avoid excessive API calls.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Search textbox in header</li>
                        <li>Placeholder: "Search Conditions"</li>
                        <li>Debounced search (300ms delay)</li>
                        <li>Searches across multiple fields</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions/search?q={query}</span>

<strong>Response:</strong>
{
  "results": [
    {...matching conditions}
  ],
  "count": 5
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Search filters grid as user types (after 300ms delay)</li>
                            <li>Searches across name, description, ID, category fields</li>
                            <li>Clearing search restores full list</li>
                            <li>Works in combination with filter pills</li>
                            <li>Case-insensitive search</li>
                            <li>No flickering or jarring updates</li>
                            <li>Search icon visible in textbox</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-106">
                    <h3>CP-106: Bulk Selection & Actions</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Checkbox-based selection system for individual and bulk condition selection. Includes "Select All" functionality and selection count badge.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Checkbox on each condition row</li>
                        <li>"Select All" checkbox in header</li>
                        <li>Selection count badge: "N selected"</li>
                        <li>Bulk action buttons (placeholder for future)</li>
                    </ul>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking checkbox selects/deselects condition</li>
                            <li>Select All checks all visible conditions</li>
                            <li>Count badge shows accurate selection count</li>
                            <li>Selection persists when filtering/searching</li>
                            <li>Visual indication of selected state</li>
                            <li>Deselecting "Select All" clears all selections</li>
                            <li>Selection state tracked in React context</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-107">
                    <h3>CP-107: Collapse/Expand Stage Groups</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (1-2 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows users to collapse and expand stage groups (SUSP, PTD, PTF, PTP, POST, TRAIL) for better navigation. State persists across page reloads using localStorage.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Expand/collapse arrow on each stage header</li>
                        <li>"Collapse All" button in header</li>
                        <li>localStorage to persist collapsed state</li>
                        <li>Smooth animation on expand/collapse</li>
                    </ul>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking stage header toggles expanded/collapsed</li>
                            <li>"Collapse All" collapses all stages</li>
                            <li>State persists across page reloads</li>
                            <li>Smooth animation on expand/collapse</li>
                            <li>Arrow icon rotates to indicate state</li>
                            <li>Collapsed stage still shows count badge</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-108">
                    <h3>CP-108: Add/Edit Condition Notes (Inline)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 11: Inline Note Editor</p>
                        <p>Screenshot 16: Condition Notes Section</p>
                        <img src="./conditions-portal-screenshot-11.png" alt="Inline Note Editor" />
                    </div>

                    <h4>Overview</h4>
                    <p>Inline rich text editor for quickly adding notes to conditions without opening a modal. Supports formatting and appears directly on the condition row.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Add a note" button on each condition row</li>
                        <li>Inline rich text editor</li>
                        <li>Toolbar: Bold, Italic, Underline, Strikethrough, Bullet List, Numbered List, Link</li>
                        <li>Save/Cancel buttons</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/notes</span>

<strong>Request Body:</strong>
{
  "content": "&lt;p&gt;This is a &lt;strong&gt;note&lt;/strong&gt; with formatting.&lt;/p&gt;",
  "author": "user-id-123"
}

<strong>Response:</strong>
{
  "id": "note-789",
  "conditionId": "CLSNG-001",
  "content": "...",
  "author": "John Doe",
  "createdAt": "2026-01-15T10:30:00Z"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking "Add a note" reveals inline editor</li>
                            <li>Editor supports rich text formatting</li>
                            <li>Save creates note with timestamp and author</li>
                            <li>Note appears in "Condition Notes" section of Edit modal</li>
                            <li>Cancel closes editor without saving</li>
                            <li>Editor replaces the note button area inline</li>
                            <li>Saved note visible immediately on grid</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-109">
                    <h3>CP-109: Set Flag on Condition (Personal)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 14: Set Flag Personal System</p>
                        <img src="./conditions-portal-screenshot-14.png" alt="Set Flag Personal System" />
                    </div>

                    <h4>Overview</h4>
                    <p>Personal flag system allowing users to mark conditions with colored flags (Red, Blue, Yellow, Green) for prioritization. Flags are user-specific and not visible to others.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Set Flag" button in Edit Condition modal</li>
                        <li>Expandable section with 5 radio buttons</li>
                        <li>Info message: "These flags are your personal flags and will not be visible to others"</li>
                        <li>"Apply" button</li>
                        <li>Visual flag indicator on grid row</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Flag Color</th>
                                <th>Value</th>
                                <th>Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Red</td>
                                <td>red</td>
                                <td>Urgent/High Priority</td>
                            </tr>
                            <tr>
                                <td>Blue</td>
                                <td>blue</td>
                                <td>Information/Review</td>
                            </tr>
                            <tr>
                                <td>Yellow</td>
                                <td>yellow</td>
                                <td>Caution/Follow-Up</td>
                            </tr>
                            <tr>
                                <td>Green</td>
                                <td>green</td>
                                <td>Complete/Good to Go</td>
                            </tr>
                            <tr>
                                <td>No Flag</td>
                                <td>null</td>
                                <td>Clear flag</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}/flag</span>

<strong>Request Body:</strong>
{
  "userId": "user-id-123",
  "flagColor": "red"
}

<strong>Response:</strong>
{
  "conditionId": "CLSNG-001",
  "userId": "user-id-123",
  "flagColor": "red",
  "updatedAt": "2026-01-15T10:30:00Z"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Flag selection opens in Edit Condition modal</li>
                            <li>Selecting flag and clicking Apply saves flag</li>
                            <li>Flag appears as colored indicator on grid row</li>
                            <li>Flag is user-specific (not visible to other users)</li>
                            <li>Clearing flag (No Flag) removes indicator</li>
                            <li>Info message clearly states flags are personal</li>
                            <li>Flag persists across sessions for that user</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-110">
                    <h3>CP-110: Exception Request Management</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (3-4 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows processors to create exception requests for conditions that cannot be satisfied normally. Includes approval workflow where underwriters approve/deny exception requests.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Exception Request" accordion in Edit Condition modal</li>
                        <li>Default message: "There currently is not an exception request"</li>
                        <li>"Create Exception" button</li>
                        <li>Exception form: reason, supporting documentation</li>
                        <li>Approval workflow</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/exceptions</span>

<strong>Request Body:</strong>
{
  "reason": "Borrower cannot provide requested documentation due to...",
  "supportingDocs": ["doc-id-1", "doc-id-2"],
  "requestedBy": "user-id-123"
}

<span class="api-method">PUT</span> <span class="api-path">/api/exceptions/{exceptionId}/approve</span>

<strong>Request Body:</strong>
{
  "approved": true,
  "approverNotes": "Exception approved based on...",
  "approvedBy": "underwriter-id-456"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Processor can create exception request with reason</li>
                            <li>Underwriter sees exception in their queue for approval</li>
                            <li>Approved exception changes condition status</li>
                            <li>Denied exception requires processor action</li>
                            <li>Exception history tracked with timestamps</li>
                            <li>Supporting documentation can be attached</li>
                            <li>Notifications sent to underwriter when exception created</li>
                            <li>Notifications sent to processor when exception approved/denied</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-111">
                    <h3>CP-111: Condition Dates (Expiration & Follow-Up)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Date picker functionality for setting Expiration Date and Follow Up Date on conditions. Dates display with "‚Äî" placeholder when empty and can be highlighted when past due.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Dates" accordion in Edit Condition modal</li>
                        <li>Expiration Date date picker</li>
                        <li>Follow Up Date date picker</li>
                        <li>Calendar icon buttons to open pickers</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}</span>

<strong>Request Body:</strong>
{
  "expirationDate": "2026-02-15",
  "followUpDate": "2026-01-20"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking calendar icon opens date picker</li>
                            <li>Selecting date updates field and saves to API</li>
                            <li>Dates display in readable format (MM/DD/YYYY)</li>
                            <li>Empty dates show "‚Äî" placeholder</li>
                            <li>Past due dates highlighted in red</li>
                            <li>Date picker supports keyboard navigation</li>
                            <li>Dates can be cleared back to empty state</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-112">
                    <h3>CP-112: Status History Timeline</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Read-only timeline displaying all status transitions with exact timestamps. Shows all 7 possible statuses, with reached statuses showing timestamp and unreached statuses showing "‚Äî".</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Condition Status Dates" section in Edit Condition modal</li>
                        <li>Always visible, read-only</li>
                        <li>Table showing all 7 statuses with timestamps</li>
                        <li>Format: "Status Name: MM/DD/YYYY HH:MM AM/PM" or "‚Äî"</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Display</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>New</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Need Brw Request</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Requested</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Processor to Review</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Ready for UW</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Cleared</td><td>Timestamp or "‚Äî"</td></tr>
                            <tr><td>Not Cleared</td><td>Timestamp or "‚Äî"</td></tr>
                        </tbody>
                    </table>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Timeline displays all status transitions</li>
                            <li>Each reached status shows exact timestamp</li>
                            <li>Unreached statuses show "‚Äî"</li>
                            <li>Read-only (cannot edit historical data)</li>
                            <li>Timeline updates automatically when status changes</li>
                            <li>Timestamps show full date and time with AM/PM</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-113">
                    <h3>CP-113: Update Loan Status with Submission Notes</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 09: Update Loan Status Modal</p>
                        <img src="./conditions-portal-screenshot-09.png" alt="Update Loan Status Modal" />
                    </div>

                    <h4>Overview</h4>
                    <p>Allows processors to add submission notes before updating loan status. Integrates with Byte API to launch external loan status page. Notes are visible to all loan team members.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Update Loan Status" button in header</li>
                        <li>Modal: "Submission Details"</li>
                        <li>Rich text editor with placeholder</li>
                        <li>Info message about note visibility</li>
                        <li>"Open Byte Loan Status Page" button</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/loans/{loanId}/status-update</span>

<strong>Request Body:</strong>
{
  "notes": "&lt;p&gt;Loan is ready for underwriter review. All conditions satisfied.&lt;/p&gt;",
  "submittedBy": "user-id-123"
}

<strong>Integration:</strong>
<span class="api-method">GET</span> Byte API endpoint to launch loan status page
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Modal opens when "Update Loan Status" clicked</li>
                            <li>Rich text editor supports formatting</li>
                            <li>Notes saved to loan (not condition-specific)</li>
                            <li>Notes visible to all loan team members</li>
                            <li>"Open Byte" button disabled until notes saved</li>
                            <li>"Open Byte" button launches external Byte system</li>
                            <li>Info message clearly states note visibility</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-114">
                    <h3>CP-114: Add Documents to Condition (Dual Source)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 10: Add Docs Dropdown Menu</p>
                        <img src="./conditions-portal-screenshot-10.png" alt="Add Docs Dropdown Menu" />
                    </div>

                    <h4>Overview</h4>
                    <p>Dual-source document addition: browse and link documents from CLEAR Docs system OR upload new files from computer. Supports drag-drop, file validation, and preview.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Add Docs" button on each condition row</li>
                        <li>Dropdown menu with 2 options</li>
                        <li>Option 1: "Browse and add docs from CLEAR Docs"</li>
                        <li>Option 2: "Upload from your computer"</li>
                        <li>File upload UI: drag-drop, file type validation, preview</li>
                        <li>CLEAR Docs browser modal</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/documents</span>

<strong>Request Body (Upload):</strong>
FormData with file attachment

<strong>Request Body (CLEAR Docs Link):</strong>
{
  "clearDocId": "clear-doc-123",
  "documentName": "Bank Statement Jan 2026.pdf",
  "linkedBy": "user-id-123"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Dropdown reveals two source options</li>
                            <li>CLEAR Docs option opens integration modal</li>
                            <li>File upload supports drag-drop and browse</li>
                            <li>Files validated for type (PDF, JPG, PNG, DOCX) and size (10MB max)</li>
                            <li>Documents linked to condition</li>
                            <li>Document count badge updates on grid</li>
                            <li>Progress indicator shows during upload</li>
                            <li>Success/error messaging displayed</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-115">
                    <h3>CP-115: View Outstanding Document Requests</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102, CP-101</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 15: Outstanding Document Requests Accordion</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Accordion section in Edit Condition modal displaying all document requests linked to the condition. Shows type, date, recipient, and status for each request.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Outstanding Document Requests" accordion in Edit Condition modal</li>
                        <li>List view: document type, request date, requested from, status</li>
                        <li>"Add a Doc Request" button</li>
                        <li>Status badges: Pending, Received, Reviewed</li>
                    </ul>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Accordion shows all doc requests for this condition</li>
                            <li>Each request shows type, date, recipient, status</li>
                            <li>Clicking "Add a Doc Request" triggers CP-101 modal</li>
                            <li>Empty state: "No document requests"</li>
                            <li>Status badges color-coded (Pending=yellow, Received=blue, Reviewed=green)</li>
                            <li>List updates when new request added</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-116">
                    <h3>CP-116: Create Custom Condition Template</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-103</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 18: Custom Condition Creator</p>
                        <img src="./conditions-portal-screenshot-18.png" alt="Custom Condition Creator" />
                    </div>

                    <h4>Overview</h4>
                    <p>Allows users to create custom conditions from scratch when standard templates don't fit. Optionally save as template for future reuse.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Custom" button in Add Conditions modal</li>
                        <li>Modal: "Add Custom Condition"</li>
                        <li>Form fields: Name, Description, Category, Number, Stage, Class, Type, Save as Template</li>
                        <li>Additional sections: Set Flag, Document Requests</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/condition-templates</span>

<strong>Request Body:</strong>
{
  "name": "Custom Condition Name",
  "description": "Custom description",
  "category": "MISC",
  "defaultStage": "PTF",
  "defaultClass": "Processor III",
  "type": "INT",
  "saveAsTemplate": true,
  "createdBy": "user-id-123"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Clicking "Custom" opens custom condition form</li>
                            <li>All 20+ categories available in dropdown</li>
                            <li>Condition number auto-generated based on category</li>
                            <li>"Save as Template" checkbox persists condition for future use</li>
                            <li>Custom condition added to Current Conditions panel</li>
                            <li>If saved as template, appears in "My Custom Templates" category</li>
                            <li>Form validation prevents submission with empty required fields</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-117">
                    <h3>CP-117: Save/Manage "My Lists"</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-103</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 17: Add Conditions with My Lists</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows users to save frequently used condition combinations as named lists for quick access. Lists are user-specific and persist across sessions.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"My Lists" section in Add Conditions modal</li>
                        <li>Pre-populated example lists: "FHA Loans", "Frequently Used"</li>
                        <li>"Add New List" button</li>
                        <li>Save list modal: name, description, selected conditions</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/users/{userId}/condition-lists</span>

<strong>Request Body:</strong>
{
  "name": "FHA Loans",
  "description": "Standard conditions for FHA loans",
  "templateIds": ["tmpl-001", "tmpl-005", "tmpl-012"]
}

<span class="api-method">GET</span> <span class="api-path">/api/users/{userId}/condition-lists</span>

<strong>Response:</strong>
{
  "lists": [
    {
      "id": "list-123",
      "name": "FHA Loans",
      "description": "...",
      "templateIds": [...]
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>User can click "Add New List" after selecting conditions</li>
                            <li>Save modal captures list name and description</li>
                            <li>Saved list appears in "My Lists" section</li>
                            <li>Clicking saved list name loads those conditions into Current Conditions panel</li>
                            <li>Lists are user-specific (not shared across team)</li>
                            <li>Lists persist across sessions</li>
                            <li>User can edit or delete saved lists</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-118">
                    <h3>CP-118: Real-time Count Badges Update</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-104, CP-106</span>
                    </div>

                    <h4>Overview</h4>
                    <p>WebSocket or polling mechanism to update count badges in real-time when conditions change. Keeps filter pill counts, selection counts, and stage group counts accurate without page refresh.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>WebSocket connection or polling mechanism</li>
                        <li>Updates filter pill counts</li>
                        <li>Updates selection count badge</li>
                        <li>Updates stage group counts</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<strong>WebSocket:</strong>
ws://api.example.com/loans/{loanId}/updates

<strong>Or Polling:</strong>
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/counts</span>

<strong>Response:</strong>
{
  "filterCounts": {...},
  "stageCounts": {...},
  "totalConditions": 45
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Filter pill counts update without page refresh</li>
                            <li>Selection count reflects accurate number</li>
                            <li>Stage group counts update when conditions move</li>
                            <li>Updates visible within 2 seconds of change</li>
                            <li>No page flicker or jarring updates</li>
                            <li>WebSocket connection handles reconnection gracefully</li>
                            <li>Polling fallback if WebSocket unavailable</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 3: UNDERWRITER FEATURES -->
            <div class="section">
                <h2 class="section-title">TIER 3: Underwriter Features (CP-201 to CP-204)</h2>

                <div class="feature-section" id="cp-201">
                    <h3>CP-201: Clear Condition (Underwriter)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-200</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows underwriters to mark conditions as "Cleared" with optional approval notes. Timestamps and underwriter name recorded in status history.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Clear" button/action in underwriter view</li>
                        <li>Status change to "Cleared"</li>
                        <li>Approval notes field (optional)</li>
                        <li>Timestamp and underwriter name recorded</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}/clear</span>

<strong>Request Body:</strong>
{
  "approvalNotes": "All documentation reviewed and acceptable.",
  "clearedBy": "underwriter-id-456"
}

<strong>Response:</strong>
{
  "id": "CLSNG-001",
  "status": "Cleared",
  "statusHistory": [...with new "Cleared" entry]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter can mark condition as "Cleared"</li>
                            <li>Approval notes captured (optional field)</li>
                            <li>Timestamp and underwriter recorded in status history</li>
                            <li>Condition moves out of underwriter queue</li>
                            <li>Processor notified of clearance</li>
                            <li>Status badge updates to green "Cleared"</li>
                            <li>Condition cannot be edited after clearing (requires unclear action)</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-202">
                    <h3>CP-202: Reject Condition (Underwriter)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-200</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows underwriters to reject conditions with required rejection reason. Sends condition back to processor with clear explanation of what needs to be fixed.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Reject" or "Not Cleared" action</li>
                        <li>Status change to "Not Cleared"</li>
                        <li>Rejection reason field (required)</li>
                        <li>Sends condition back to processor</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}/reject</span>

<strong>Request Body:</strong>
{
  "rejectionReason": "Bank statements are incomplete. Need full 2 months.",
  "rejectedBy": "underwriter-id-456"
}

<strong>Response:</strong>
{
  "id": "CLSNG-001",
  "status": "Not Cleared",
  "statusHistory": [...with "Not Cleared" entry]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter can mark condition as "Not Cleared"</li>
                            <li>Rejection reason required (cannot be empty)</li>
                            <li>Condition returns to processor queue</li>
                            <li>Processor notified of rejection with reason</li>
                            <li>Status history records rejection with reason</li>
                            <li>Status badge updates to red "Not Cleared"</li>
                            <li>Rejection reason visible to processor in condition notes</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-203">
                    <h3>CP-203: Request Additional Info (UW to Processor)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-200</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows underwriters to send conditions back to processors requesting additional information or clarification without fully rejecting the condition.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Request Info" button in underwriter view</li>
                        <li>Status change to "Processor to Review"</li>
                        <li>Comments field for specifying needed info</li>
                        <li>Notification to processor</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}/request-info</span>

<strong>Request Body:</strong>
{
  "comments": "Please clarify the source of the $10,000 deposit on page 3.",
  "requestedBy": "underwriter-id-456"
}

<strong>Response:</strong>
{
  "id": "CLSNG-001",
  "status": "Processor to Review",
  "statusHistory": [...]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter can send condition back for more information</li>
                            <li>Status changes to "Processor to Review"</li>
                            <li>Comments field captures what additional info is needed</li>
                            <li>Processor receives notification with comments</li>
                            <li>Processor can see underwriter's request in condition notes</li>
                            <li>Condition remains in processor queue until addressed</li>
                            <li>Underwriter's comments timestamped and attributed</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-204">
                    <h3>CP-204: Escalate Condition for Review (Underwriter)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-200</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows underwriters to escalate complex or difficult conditions to senior underwriters or managers for review and guidance.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Escalate" button for complex conditions</li>
                        <li>Escalation reason field</li>
                        <li>Escalation notification to senior underwriter/manager</li>
                        <li>Condition flagged in system</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/escalate</span>

<strong>Request Body:</strong>
{
  "reason": "Complex income calculation requires senior review.",
  "escalatedBy": "underwriter-id-456",
  "escalateTo": "senior-uw-id-789"
}

<strong>Response:</strong>
{
  "id": "escalation-123",
  "conditionId": "CLSNG-001",
  "escalatedAt": "2026-01-15T10:30:00Z",
  "status": "Pending Review"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter can escalate difficult conditions</li>
                            <li>Escalation reason captured and required</li>
                            <li>Senior underwriter/manager notified</li>
                            <li>Condition appears in escalated conditions queue</li>
                            <li>Original underwriter remains assigned</li>
                            <li>Escalation history tracked with timestamps</li>
                            <li>Visual indicator shows condition is escalated</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 3: BORROWER FEATURES -->
            <div class="section">
                <h2 class="section-title">TIER 3: Borrower Features (CP-301 to CP-304)</h2>

                <div class="feature-section" id="cp-301">
                    <h3>CP-301: View Required Documents List (Borrower)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-300</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Borrower-facing portal showing only BRW-type conditions in simplified, borrower-friendly language. Displays document requests with due dates and status indicators.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Borrower portal view (BRW-type conditions only)</li>
                        <li>Simplified language (no internal jargon)</li>
                        <li>Document request list with due dates</li>
                        <li>Status indicators: Pending, Submitted, Approved</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/borrowers/{borrowerId}/document-requests</span>

<strong>Response:</strong>
{
  "requests": [
    {
      "id": "doc-req-123",
      "documentType": "Bank Statements",
      "description": "Please provide 2 months of bank statements",
      "dueDate": "2026-01-20",
      "status": "Pending"
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower sees only conditions marked type="BRW"</li>
                            <li>Language is borrower-friendly (no acronyms like PTF, UW, etc.)</li>
                            <li>Each document request shows: name, description, due date, status</li>
                            <li>Overdue requests highlighted in red</li>
                            <li>Mobile-responsive (works on phone screens)</li>
                            <li>Status badges use clear language (Not Started, In Progress, Complete)</li>
                            <li>Clean, simple UI without overwhelming details</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-302">
                    <h3>CP-302: Upload Documents for Condition (Borrower)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-300, CP-301</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows borrowers to upload documents via drag-drop or file browser. Supports multiple files, shows upload progress, validates file types and sizes, and notifies processor when complete.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Upload Document" button for each request</li>
                        <li>File upload UI: drag-drop, multiple file support</li>
                        <li>File preview before submission</li>
                        <li>Progress indicator during upload</li>
                        <li>Success/error messaging</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>files</td>
                                <td>FileList</td>
                                <td>Max 10MB per file, formats: PDF, JPG, PNG, DOCX</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/document-requests/{requestId}/upload</span>

<strong>Request Body:</strong>
FormData with file(s)

<strong>Response:</strong>
{
  "uploadedFiles": [
    {
      "id": "file-123",
      "name": "bank_statement_jan_2026.pdf",
      "size": 2458963,
      "uploadedAt": "2026-01-15T10:30:00Z"
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower can upload files via drag-drop or browse</li>
                            <li>Multiple files supported per request</li>
                            <li>File size limit enforced (10MB per file)</li>
                            <li>Supported formats: PDF, JPG, PNG, DOCX</li>
                            <li>Progress bar shows upload status</li>
                            <li>Success message confirms upload</li>
                            <li>Processor notified of new document</li>
                            <li>File preview shown before final submission</li>
                            <li>Clear error messages for invalid files</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-303">
                    <h3>CP-303: Track Condition Status & Timeline (Borrower)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-300</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Visual timeline showing borrowers the progress of their document requests through simplified stages: Requested ‚Üí Submitted ‚Üí Under Review ‚Üí Approved/Rejected.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Status timeline view: Requested ‚Üí Submitted ‚Üí Under Review ‚Üí Approved/Rejected</li>
                        <li>Visual progress indicator</li>
                        <li>Timestamp for each stage</li>
                        <li>Estimated completion date</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/borrowers/{borrowerId}/conditions/status</span>

<strong>Response:</strong>
{
  "conditions": [
    {
      "id": "CLSNG-001",
      "name": "Bank Statements",
      "timeline": {
        "requested": "2026-01-10T10:00:00Z",
        "submitted": "2026-01-12T14:30:00Z",
        "underReview": "2026-01-13T09:00:00Z",
        "completed": null
      },
      "currentStage": "underReview",
      "estimatedCompletion": "2026-01-16"
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower sees visual timeline of condition status</li>
                            <li>Current stage highlighted</li>
                            <li>Completed stages show checkmark and timestamp</li>
                            <li>Pending stages grayed out</li>
                            <li>Estimated completion date displayed (if available)</li>
                            <li>Simplified stage names (no internal terminology)</li>
                            <li>Mobile-friendly timeline design</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-304">
                    <h3>CP-304: Receive Notifications for Updates (Borrower)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-300</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Multi-channel notification system for borrowers: email (required), SMS (opt-in), and in-app notifications. Notifies borrowers of new requests, document approval/rejection, and status changes.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Email notifications: new document request, document approved, document rejected</li>
                        <li>SMS notifications (opt-in)</li>
                        <li>In-app notification bell icon with count badge</li>
                        <li>Notification preferences page</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/notifications/send</span>

<strong>Request Body:</strong>
{
  "recipientId": "borrower-id-123",
  "type": "document_request",
  "channels": ["email", "sms"],
  "data": {
    "documentType": "Bank Statements",
    "dueDate": "2026-01-20"
  }
}

<span class="api-method">GET</span> <span class="api-path">/api/borrowers/{borrowerId}/notifications</span>

<strong>Response:</strong>
{
  "unreadCount": 3,
  "notifications": [...]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower receives email when document requested</li>
                            <li>Borrower receives email when document approved/rejected</li>
                            <li>SMS opt-in available in preferences</li>
                            <li>In-app bell icon shows unread count</li>
                            <li>Clicking notification navigates to relevant condition</li>
                            <li>Notification preferences saved per borrower</li>
                            <li>Email templates are borrower-friendly and clear</li>
                            <li>SMS messages are concise and actionable</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 3: CROSS-CUTTING FEATURES -->
            <div class="section">
                <h2 class="section-title">TIER 3: Cross-Cutting Features (CP-400 to CP-404)</h2>

                <div class="feature-section" id="cp-400">
                    <h3>CP-400: Activity History & Audit Log</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Comprehensive audit log tracking all changes to conditions. Shows who made what change, when, and before/after values. Filterable by action type, user, and date range. Exportable to CSV.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Activity log view showing all actions on condition</li>
                        <li>Filterable by action type, user, date range</li>
                        <li>Audit trail: who, what, when, from/to values</li>
                        <li>Export to CSV</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/conditions/{conditionId}/audit-log</span>

<strong>Query Params:</strong>
- actionType (optional)
- userId (optional)
- startDate (optional)
- endDate (optional)

<strong>Response:</strong>
{
  "auditEntries": [
    {
      "id": "audit-123",
      "timestamp": "2026-01-15T10:30:00Z",
      "userId": "user-id-123",
      "userName": "John Doe",
      "action": "status_change",
      "field": "status",
      "oldValue": "New",
      "newValue": "Ready for UW"
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>All condition changes logged with timestamp and user</li>
                            <li>Log shows before/after values for edited fields</li>
                            <li>Filterable by action type and date</li>
                            <li>Exportable to CSV</li>
                            <li>Log immutable (cannot be edited or deleted)</li>
                            <li>Clear action descriptions (not technical codes)</li>
                            <li>Pagination for large logs</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-401">
                    <h3>CP-401: Email & SMS Notifications</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Multi-channel notification system with SMTP email and SMS (Twilio) integration. Sends notifications for key events: document requested, status changed, condition cleared, etc. Users can configure notification preferences.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Email notification system (SMTP integration)</li>
                        <li>SMS notification system (Twilio/similar)</li>
                        <li>Notification templates: document requested, status changed, condition cleared</li>
                        <li>Notification preferences per user</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/notifications/send</span>

<strong>Integrations:</strong>
- SMTP server for email
- Twilio API for SMS
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Processor notified when borrower uploads document</li>
                            <li>Underwriter notified when condition ready for review</li>
                            <li>Borrower notified when document requested</li>
                            <li>Borrower notified when condition cleared</li>
                            <li>Users can opt-out of specific notification types</li>
                            <li>Notifications sent within 1 minute of trigger event</li>
                            <li>Email templates are professional and branded</li>
                            <li>SMS messages are concise (160 characters)</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-402">
                    <h3>CP-402: Export Conditions Report (PDF/Excel)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Export functionality to generate PDF or Excel reports of conditions. PDF formatted with company branding, Excel contains all grid columns. Report respects current filters (only exports visible conditions).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Export" button in header</li>
                        <li>Format selector: PDF or Excel</li>
                        <li>Report includes: all visible conditions, current filters, metadata</li>
                        <li>PDF: formatted report with logo</li>
                        <li>Excel: spreadsheet with columns matching grid</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions/export</span>

<strong>Query Params:</strong>
- format: "pdf" | "xlsx"
- filters: JSON object with active filters

<strong>Response:</strong>
Binary file download (PDF or Excel)
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Export button generates report based on current view</li>
                            <li>PDF formatted with company branding</li>
                            <li>Excel contains all columns from grid</li>
                            <li>Report respects current filters (only exports visible conditions)</li>
                            <li>Download initiates within 3 seconds</li>
                            <li>File named appropriately (e.g., "Conditions_2024-001234_2026-01-15.pdf")</li>
                            <li>Excel is properly formatted with headers and data types</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-403">
                    <h3>CP-403: CLEAR Docs System Integration</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (5-6 hours)</span>
                        <span class="badge">Depends On: CP-001, CP-114</span>
                    </div>

                    <h4>Overview</h4>
                    <p>API integration with CLEAR Docs document management system. Allows browsing, searching, and linking documents from CLEAR Docs to conditions. Syncs document metadata and handles authentication.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>API integration with CLEAR Docs</li>
                        <li>Document browser modal</li>
                        <li>Document metadata sync</li>
                        <li>Link CLEAR document to condition</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<strong>Integration with CLEAR Docs API:</strong>

<span class="api-method">GET</span> CLEAR Docs API: /documents?loanId={loanId}
(Browse available documents)

<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/documents/link-clear</span>

<strong>Request Body:</strong>
{
  "clearDocId": "clear-doc-123",
  "documentName": "Bank Statement Jan 2026.pdf",
  "documentType": "Bank Statements"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>User can browse CLEAR Docs from within app</li>
                            <li>Selected documents linked to condition</li>
                            <li>Document metadata (name, date, type) synced</li>
                            <li>Documents accessible via link (opens in CLEAR)</li>
                            <li>Integration handles authentication</li>
                            <li>Search functionality within CLEAR Docs browser</li>
                            <li>Error handling for integration failures</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-404">
                    <h3>CP-404: Byte API Integration (Loan Data Sync)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (5-6 hours)</span>
                        <span class="badge">Depends On: CP-001, CP-113</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 09: Update Loan Status Modal (with "Open Byte Loan Status Page" button)</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Bidirectional API integration with Byte loan origination system. Pulls loan data (borrower info, loan amount, property address) and pushes condition status updates. Includes "Open Byte Loan Status Page" button functionality.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>API integration with Byte</li>
                        <li>Loan data pull: borrower info, loan amount, property address</li>
                        <li>Condition data push: status updates to Byte</li>
                        <li>"Open Byte Loan Status Page" button functionality</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<strong>Integration with Byte API:</strong>

<span class="api-method">GET</span> Byte API: /loans/{loanId}
(Pull loan data)

<span class="api-method">POST</span> Byte API: /loans/{loanId}/conditions/sync
(Push condition updates)

<span class="api-method">GET</span> Byte API: /loans/{loanId}/status-page-url
(Get URL to launch Byte loan status page)
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Loan data automatically synced from Byte</li>
                            <li>Condition status changes pushed to Byte</li>
                            <li>"Open Byte" button launches external system with loan context</li>
                            <li>Sync errors handled gracefully with retry logic</li>
                            <li>Integration authenticated via OAuth or API key</li>
                            <li>Sync occurs in background without blocking UI</li>
                            <li>Sync status indicator visible to users</li>
                            <li>Manual sync button available if needed</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div style="text-align: center; padding: 40px; background: #f8f9fa; border-top: 2px solid #1e3c72; margin-top: 50px;">
                <p style="color: #666; font-size: 0.9em;">
                    <strong>Document Version:</strong> 1.0 - Complete 35 Ticket Breakdown<br>
                    <strong>Last Updated:</strong> January 2026<br>
                    <strong>POC Source:</strong> https://conditions-portal-pr-ahby.bolt.host/
                </p>
            </div>
        </div>
    </div>
</body>
</html>