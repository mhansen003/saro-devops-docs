<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditions Portal - Complete Feature Specifications (43 Tickets)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
            padding: 20px;
            line-height: 1.6;
            color: #e6e8eb;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: #1e2333;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .breadcrumb {
            background: #252b3b;
            padding: 15px 40px;
            border-bottom: 1px solid #3d4557;
            font-size: 0.9em;
        }

        .breadcrumb a {
            color: #8b9eff;
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: #a8b4ff;
            text-decoration: underline;
        }

        .breadcrumb .separator {
            margin: 0 10px;
            color: #5a6070;
        }

        .breadcrumb .current {
            color: #c8cdd8;
        }

        .content {
            padding: 40px;
        }

        .toc {
            background: #252b3b;
            border: 2px solid #3d4557;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .toc h2 {
            color: #8b9eff;
            margin-bottom: 20px;
        }

        .toc-section {
            margin-bottom: 20px;
        }

        .toc-section h3 {
            color: #a8b4ff;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .toc-list {
            list-style: none;
            padding-left: 20px;
        }

        .toc-list li {
            margin-bottom: 8px;
        }

        .toc-list a {
            color: #8b9eff;
            text-decoration: none;
            font-weight: 500;
        }

        .toc-list a:hover {
            text-decoration: underline;
            color: #a8b4ff;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            color: #8b9eff;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #8b9eff;
        }

        .feature-section {
            background: #252b3b;
            border: 2px solid #3d4557;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .feature-section h3 {
            color: #8b9eff;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .feature-section h4 {
            color: #a8b4ff;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }

        .feature-section p, .feature-section ul, .feature-section li {
            color: #b8bcc8;
        }

        .feature-section strong {
            color: #e6e8eb;
        }

        .meta-info {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3d4557;
        }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .badge-platform { background: #9c27b0; color: white; }
        .badge-role { background: #ff9800; color: white; }
        .badge-feature { background: #20c997; color: white; }
        .badge-small { background: #28a745; color: white; }
        .badge-medium { background: #ffc107; color: #333; }
        .badge-large { background: #dc3545; color: white; }
        .badge-new { background: #17a2b8; color: white; }

        .screenshot-ref {
            background: #2d3348;
            border-left: 5px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            border: 1px solid #3d4557;
        }

        .screenshot-ref strong {
            color: #8b9eff;
        }

        .screenshot-ref p {
            color: #b8bcc8;
        }

        .screenshot-ref img {
            max-width: 100%;
            border: 2px solid #3d4557;
            border-radius: 8px;
            margin-top: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            background: #252b3b;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #3d4557;
            color: #b8bcc8;
        }

        td strong {
            color: #e6e8eb;
        }

        tr:hover {
            background: #2d3348;
        }

        .acceptance-criteria {
            background: #1e3a2e;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #3d4557;
        }

        .acceptance-criteria h4 {
            color: #4ade80;
        }

        .acceptance-criteria ul {
            list-style: none;
            padding-left: 0;
        }

        .acceptance-criteria li {
            margin-bottom: 12px;
            padding-left: 30px;
            position: relative;
            color: #b8bcc8;
        }

        .acceptance-criteria li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4ade80;
            font-weight: bold;
            font-size: 1.2em;
        }

        .acceptance-criteria strong {
            color: #e6e8eb;
        }

        .api-endpoint {
            background: #181d29;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            border: 1px solid #2d3548;
        }

        .api-method {
            color: #569cd6;
        }

        .api-path {
            color: #ce9178;
        }

        ul, ol {
            margin-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }

        .day1-insight {
            background: #2d2340;
            border-left: 5px solid #764ba2;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            border: 1px solid #4d3557;
        }

        .day1-insight strong {
            color: #a78bfa;
        }

        .day1-insight p {
            color: #c4b5fd;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Conditions Portal - Complete Feature Specifications</h1>
            <p style="margin-top: 10px;">All 43 Tickets with Full Acceptance Criteria & Day 1 Offsite Details</p>
            <p style="margin-top: 5px; font-size: 0.9em;">POC URL: https://conditions-portal-pr-ahby.bolt.host/</p>
            <p style="margin-top: 5px; font-size: 0.85em; opacity: 0.9;">Updated with Day 1 Offsite Transcript Analysis (January 13, 2026)</p>
        </div>

        <div class="breadcrumb">
            <a href="/dashboard.html">üè† Dashboard</a>
            <span class="separator">‚Üí</span>
            <a href="/tracts/index.html">Tracts</a>
            <span class="separator">‚Üí</span>
            <span class="current">Detailed Features</span>
        </div>

        <div class="content">
            <!-- Table of Contents -->
            <div class="toc">
                <h2>Table of Contents - All 43 Tickets</h2>

                <div class="toc-section">
                    <h3>TIER 1: Platform Foundation (1 ticket)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-001">CP-001: Conditions Grid Platform (Read-Only)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 2: Role Scaffolding (3 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-100">CP-100: Processor Role Shell</a></li>
                        <li><a href="#cp-200">CP-200: Underwriter Role Shell</a></li>
                        <li><a href="#cp-300">CP-300: Borrower Role Shell</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Processor Features (26 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-101">CP-101: Add Document Request with Rich Text</a></li>
                        <li><a href="#cp-102">CP-102: Edit Condition - Full CRUD</a></li>
                        <li><a href="#cp-103">CP-103: Add Conditions from Template Library</a></li>
                        <li><a href="#cp-104">CP-104: Filter by Status (Processor View)</a></li>
                        <li><a href="#cp-105">CP-105: Search Conditions (Real-time)</a></li>
                        <li><a href="#cp-106">CP-106: Bulk Selection & Actions</a></li>
                        <li><a href="#cp-107">CP-107: Collapse/Expand Stage Groups</a></li>
                        <li><a href="#cp-108">CP-108: Add/Edit Condition Notes (Inline)</a></li>
                        <li><a href="#cp-109">CP-109: Set Flag on Condition (Personal)</a></li>
                        <li><a href="#cp-110">CP-110: Exception Request Management</a></li>
                        <li><a href="#cp-111">CP-111: Condition Dates (Expiration & Follow-Up)</a></li>
                        <li><a href="#cp-112">CP-112: Status History Timeline</a></li>
                        <li><a href="#cp-113">CP-113: Update Loan Status with Submission Notes</a></li>
                        <li><a href="#cp-114">CP-114: Add Documents to Condition (Dual Source)</a></li>
                        <li><a href="#cp-115">CP-115: View Outstanding Document Requests</a></li>
                        <li><a href="#cp-116">CP-116: Create Custom Condition Template</a></li>
                        <li><a href="#cp-117">CP-117: Save/Manage "My Lists"</a></li>
                        <li><a href="#cp-118">CP-118: Real-time Count Badges Update</a></li>
                        <li><a href="#cp-119">CP-119: Email Signature Management (NEW)</a></li>
                        <li><a href="#cp-120">CP-120: Document Request History Tab (NEW)</a></li>
                        <li><a href="#cp-121">CP-121: Loan History Tab (NEW)</a></li>
                        <li><a href="#cp-122">CP-122: Read/Unread Note Indicators with Bell Icon (NEW)</a></li>
                        <li><a href="#cp-123">CP-123: Bar Dependency Flag for Conditions (NEW)</a></li>
                        <li><a href="#cp-124">CP-124: Transaction Field (Replaces Responsibility) (NEW)</a></li>
                        <li><a href="#cp-125">CP-125: Automated Conditions Rules Engine (NEW)</a></li>
                        <li><a href="#cp-126">CP-126: Scenario Selector for Testing (Moved from Overview)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Underwriter Features (4 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-201">CP-201: Clear Condition (Underwriter)</a></li>
                        <li><a href="#cp-202">CP-202: Reject Condition (Underwriter)</a></li>
                        <li><a href="#cp-203">CP-203: Request Additional Info (UW to Processor)</a></li>
                        <li><a href="#cp-204">CP-204: Escalate Condition for Review (Underwriter)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Borrower Features (4 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-301">CP-301: View Required Documents List (Borrower)</a></li>
                        <li><a href="#cp-302">CP-302: Upload Documents for Condition (Borrower)</a></li>
                        <li><a href="#cp-303">CP-303: Track Condition Status & Timeline (Borrower)</a></li>
                        <li><a href="#cp-304">CP-304: Receive Notifications for Updates (Borrower)</a></li>
                    </ul>
                </div>

                <div class="toc-section">
                    <h3>TIER 3: Cross-Cutting Features (5 tickets)</h3>
                    <ul class="toc-list">
                        <li><a href="#cp-400">CP-400: Activity History & Audit Log</a></li>
                        <li><a href="#cp-401">CP-401: Email & SMS Notifications</a></li>
                        <li><a href="#cp-402">CP-402: Export Conditions Report (PDF/Excel)</a></li>
                        <li><a href="#cp-403">CP-403: CLEAR Docs System Integration</a></li>
                        <li><a href="#cp-404">CP-404: Byte API Integration (Loan Data Sync)</a></li>
                    </ul>
                </div>
            </div>

            <!-- DAY 1 OFFSITE KEY INSIGHTS -->
            <div class="section" style="background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); color: white; padding: 30px; border-radius: 12px; margin: 30px 0; border: 1px solid #3d4557;">
                <h2 style="color: white; margin-bottom: 20px;">üìã Day 1 Offsite Key Insights (January 13, 2026)</h2>

                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: white; margin-bottom: 15px;">Critical Architecture Decisions</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Many-to-Many Document-Condition Linking:</strong> Deviation from Byte's 1:1 model; requires reconciliation logic</li>
                        <li><strong>Three-Level Notes System:</strong> Loan notes, condition notes, and document notes with timestamps and user attribution</li>
                        <li><strong>Personal Flags Only:</strong> User-specific, not global communication mechanism</li>
                        <li><strong>Auto-Save on Terminal Actions:</strong> No save button - accept, clear, reject trigger saves</li>
                        <li><strong>Hybrid Data Model:</strong> Core data in Byte, metadata in Clear with ~30 second bidirectional sync</li>
                        <li><strong>Role Consolidation:</strong> From 400+ Byte roles to 5-7 base roles with class-based permissions</li>
                        <li><strong>Audit Logging:</strong> All changes tracked with user attribution and timestamps</li>
                    </ul>
                </div>

                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: white; margin-bottom: 15px;">Key Decisions Made</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Transaction Field Replaces Responsibility:</strong> Per Kelly Mattox (Byte Platform Owner) direction for Candor integration</li>
                        <li><strong>Processor III Class Permissions:</strong> Specific permission levels for Processor III vs general processor roles</li>
                        <li><strong>Bar Dependency Flag:</strong> Required for borrower document request workflow</li>
                        <li><strong>Build in Clear, Launch from Byte:</strong> Follow existing pattern (Clear Docs, Pipeline)</li>
                        <li><strong>Support All Downstream Roles:</strong> Funders, closers, post-closing teams included in rollout</li>
                    </ul>
                </div>

                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: white; margin-bottom: 15px;">Rollout Strategy</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Phased Beta Approach:</strong> Loan-level flag in Byte to identify "Conditions Portal loans"</li>
                        <li><strong>Full Value Chain Pilot:</strong> LOs, processors, underwriters, closers, funders, post-closing</li>
                        <li><strong>Parallel Operation:</strong> Users may work both systems depending on loan flag</li>
                        <li><strong>One Month Pilot:</strong> Monitor and fix before company-wide rollout</li>
                    </ul>
                </div>
            </div>

            <!-- TIER 1: PLATFORM FOUNDATION -->
            <div class="section">
                <h2 class="section-title">TIER 1: Platform Foundation</h2>

                <div class="feature-section" id="cp-001">
                    <h3>CP-001: Conditions Grid Platform (Read-Only)</h3>

                    <div class="meta-info">
                        <span class="badge badge-platform">Platform</span>
                        <span class="badge badge-large">Size: Large (8+ hours)</span>
                        <span class="badge">Depends On: None</span>
                        <span class="badge">Blocks: CP-100, CP-200, CP-300, CP-400</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 01: Main Grid View</p>
                        <img src="./conditions-portal-screenshot-01.png" alt="Main Grid View" />
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Insights:</strong>
                        <p><strong>Many-to-Many Document-Condition Linking:</strong> Major deviation from Byte's 1:1 model. A single document can be linked to multiple conditions, and a condition can have multiple documents. This requires reconciliation logic when syncing back to Byte.</p>
                        <p><strong>Hybrid Data Model:</strong> Core condition data lives in Byte (category, number, description, status, stage, class). Metadata and user interactions live in Clear (personal flags, notes, document links). API handles bidirectional sync with ~30 second acceptable delay.</p>
                        <p><strong>Class-Based Permissions:</strong> Conditions have a "class" field (UW vs Processor III) that determines which role can act on them. This enables Processor III-specific conditions that require elevated permissions.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>The foundational grid component that displays all conditions for a loan, grouped by stage (SUSP, PTD, PTF, PTP, POST, TRAIL). This is a read-only view that establishes the core UI framework, data models, and API contracts for the entire application.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Grid component with virtual scrolling for performance</li>
                        <li>Stage grouping headers with expand/collapse functionality</li>
                        <li>Column headers: Checkbox, Category, Condition Description, Status, Notes, Doc Requests, Docs</li>
                        <li>Bulk selection checkboxes on each row</li>
                        <li>Filter pills container (placeholder for role-specific filters)</li>
                        <li>Search box container</li>
                        <li>Action buttons panel (placeholder)</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>id</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Format: CATEGORY-NUMBER (e.g., "CLSNG-001")</td>
                            </tr>
                            <tr>
                                <td>category</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 20+ categories (APP, DISC, CRED, INC, ASSET, etc.)</td>
                            </tr>
                            <tr>
                                <td>number</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>3-digit number, system-generated</td>
                            </tr>
                            <tr>
                                <td>name</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 200 characters</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 1000 characters</td>
                            </tr>
                            <tr>
                                <td>status</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 7 statuses: New, Need Brw Request, Requested, Processor to Review, Ready for UW, Cleared, Not Cleared</td>
                            </tr>
                            <tr>
                                <td>stage</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 6 stages: SUSP, PTD, PTF, PTP, POST, TRAIL</td>
                            </tr>
                            <tr>
                                <td>class</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"UW" or "Processor III" (determines permission level)</td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"INT" (Internal) or "BRW" (Borrower)</td>
                            </tr>
                            <tr>
                                <td>hasBarDependency</td>
                                <td>boolean</td>
                                <td>No</td>
                                <td>Flag indicating if condition requires borrower documents (from Day 1)</td>
                            </tr>
                            <tr>
                                <td>transaction</td>
                                <td>string</td>
                                <td>No</td>
                                <td>Replaces "responsibility" field per Kelly Mattox (Day 1)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions</span>

<strong>Response:</strong>
{
  "loanId": "2024-001234",
  "conditions": [
    {
      "id": "CLSNG-001",
      "category": "CLSNG",
      "number": "001",
      "name": "Final Closing Disclosure",
      "description": "Final Closing Disclosure reviewed and signed",
      "status": "New",
      "stage": "PTF",
      "class": "Processor III",
      "type": "INT",
      "hasBarDependency": false,
      "transaction": "Purchase",
      "addedBy": "System",
      "createdDate": "2026-01-08T12:26:00Z",
      "statusHistory": [...],
      "notes": {
        "loan": [...],
        "condition": [...],
        "document": [...]
      },
      "documentRequests": [],
      "documents": [],
      "linkedDocumentIds": []
    }
  ],
  "syncStatus": {
    "lastByteSync": "2026-01-15T10:29:30Z",
    "lastClearSync": "2026-01-15T10:30:00Z",
    "pendingChanges": 0
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Grid displays all conditions grouped by stage</li>
                            <li>Read-only view (no mutations possible)</li>
                            <li>API integration complete and functional</li>
                            <li>Responsive layout works on desktop (1920px to 1280px)</li>
                            <li>Loads within 2 seconds for 100+ conditions</li>
                            <li>Virtual scrolling implemented for performance</li>
                            <li>Stage groups show accurate condition counts</li>
                            <li>Conditions display correct status badges with color coding</li>
                            <li>Checkbox selection state tracked correctly</li>
                            <li>All 7 columns render properly with correct data</li>
                            <li><strong>Day 1:</strong> Many-to-many document linking supported in data model</li>
                            <li><strong>Day 1:</strong> Three-level notes structure (loan, condition, document) implemented</li>
                            <li><strong>Day 1:</strong> Sync status indicator shows last Byte and Clear sync times</li>
                            <li><strong>Day 1:</strong> Class-based permission checks enforced (UW vs Processor III)</li>
                            <li><strong>Day 1:</strong> Bar dependency flag displayed for applicable conditions</li>
                            <li><strong>Day 1:</strong> Transaction field populated (not responsibility field)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 2: ROLE SCAFFOLDING -->
            <div class="section">
                <h2 class="section-title">TIER 2: Role Scaffolding</h2>

                <div class="feature-section" id="cp-100">
                    <h3>CP-100: Processor Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-101 through CP-126</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 01: Main Grid View (Processor View)</p>
                        <p>Screenshot 07: Role Switcher</p>
                        <img src="./conditions-portal-screenshot-07.png" alt="Role Switcher" />
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Insights:</strong>
                        <p><strong>Role Consolidation:</strong> Byte has 400+ roles that need to be mapped to 5-7 base roles in Conditions Portal. At login, user's Byte role(s) are mapped to one of the base roles (Processor, Processor III, Underwriter, Senior Underwriter, Funder, Closer, Post-Closing).</p>
                        <p><strong>Processor III Specific Permissions:</strong> Processor III is a distinct class with elevated permissions. They can work conditions marked as "Processor III" class, while regular processors cannot. This distinction is critical for compliance and workflow separation.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Processor role view with specific filters and permission checks. This shell establishes the foundation for all processor-specific features (CP-101 through CP-126).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Processor-specific filter pills container (5 filters)</li>
                        <li>Action buttons panel with placeholder functionality</li>
                        <li>Role-based permission checks</li>
                        <li>Route: /processor/conditions</li>
                        <li>Role switcher dropdown in header</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>userRole</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"Processor" or "Processor III" (for this view)</td>
                            </tr>
                            <tr>
                                <td>filterPills</td>
                                <td>array</td>
                                <td>Yes</td>
                                <td>Exactly 5 pills: Active, Need to Request, Requested, Send Brw Requests, Review Docs</td>
                            </tr>
                            <tr>
                                <td>byteRoleMapping</td>
                                <td>array</td>
                                <td>Yes</td>
                                <td>Maps user's Byte role(s) to base role (Day 1)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions?role=processor</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to class="Processor" or "Processor III" based on user permission],
  "filterCounts": {
    "active": 12,
    "needToRequest": 5,
    "requested": 8,
    "sendBrwRequests": 3,
    "reviewDocs": 7
  },
  "userPermissions": {
    "baseRole": "Processor III",
    "canWorkProcessorIIIConditions": true,
    "byteRoles": ["Loan Processor", "Senior Processor"]
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Processor view shows only conditions where class="Processor" or class="Processor III" (if user has Processor III permission)</li>
                            <li>5 filter pills visible: Active, Need to Request, Requested, Send Brw Requests, Review Docs</li>
                            <li>Each filter pill displays accurate count badge</li>
                            <li>Action panel renders but buttons are placeholders (no functionality yet)</li>
                            <li>Permission check prevents underwriter-only actions</li>
                            <li>Role switcher allows changing between Processor and Underwriter views</li>
                            <li>Grid filters correctly based on processor role</li>
                            <li>Route /processor/conditions is accessible</li>
                            <li><strong>Day 1:</strong> User's Byte roles correctly mapped to base role at login</li>
                            <li><strong>Day 1:</strong> Processor III users can see and work Processor III class conditions</li>
                            <li><strong>Day 1:</strong> Regular processors cannot see Processor III class conditions</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-200">
                    <h3>CP-200: Underwriter Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-201 through CP-204</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 19: Underwriter View (2 filters vs 5)</p>
                        <img src="./conditions-portal-screenshot-19.png" alt="Underwriter View" />
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Insights:</strong>
                        <p><strong>Simplified Underwriter View:</strong> Underwriters need a focused, decision-oriented interface. Only 2 filters (Active, Review Docs) vs processor's 5 filters. Emphasis on approve/reject actions rather than document management.</p>
                        <p><strong>Auto-Save on Terminal Actions:</strong> When underwriter clears or rejects a condition, no save button is required. The terminal action (clear/reject) automatically triggers save and updates Byte in near real-time.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Underwriter role view with simplified filters focused on approval/rejection decisions. This shell establishes the foundation for all underwriter-specific features (CP-201 through CP-204).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Underwriter-specific filter pills container (2 filters only)</li>
                        <li>Decision action panel with placeholder functionality</li>
                        <li>Simplified UI focused on approval/rejection</li>
                        <li>Route: /underwriter/conditions</li>
                        <li>Role-based permission checks</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions?role=underwriter</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to class="UW"],
  "filterCounts": {
    "active": 8,
    "reviewDocs": 5
  },
  "userPermissions": {
    "baseRole": "Underwriter",
    "canClearConditions": true,
    "canRejectConditions": true,
    "byteRoles": ["Underwriter", "DE Underwriter"]
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Underwriter view shows only conditions where class="UW"</li>
                            <li>2 filter pills visible: Active, Review Docs</li>
                            <li>Simplified UI compared to Processor view</li>
                            <li>Decision panel placeholder renders</li>
                            <li>Permission check prevents processor-only actions</li>
                            <li>Route /underwriter/conditions is accessible</li>
                            <li>Grid filters correctly based on underwriter role</li>
                            <li>Count badges update correctly for underwriter filters</li>
                            <li><strong>Day 1:</strong> Terminal actions (clear/reject) trigger auto-save without explicit save button</li>
                            <li><strong>Day 1:</strong> User's Byte underwriter roles mapped to base underwriter role</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-300">
                    <h3>CP-300: Borrower Role Shell</h3>

                    <div class="meta-info">
                        <span class="badge badge-role">Role</span>
                        <span class="badge badge-medium">Size: Medium (4-6 hours)</span>
                        <span class="badge">Depends On: CP-001</span>
                        <span class="badge">Blocks: CP-301 through CP-304</span>
                    </div>

                    <h4>Overview</h4>
                    <p>Creates the Borrower portal view with simplified, borrower-friendly language and mobile-responsive design. This shell establishes the foundation for all borrower-specific features (CP-301 through CP-304).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Borrower-facing portal view</li>
                        <li>Document upload area placeholder</li>
                        <li>Status timeline view</li>
                        <li>Route: /borrower/conditions</li>
                        <li>Mobile-responsive layout</li>
                        <li>Simplified language (no internal jargon)</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/borrowers/{borrowerId}/conditions</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to type="BRW"],
  "borrowerInfo": {
    "name": "Michael & Sarah Johnson",
    "loanNumber": "2024-001234"
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Borrower sees only conditions marked type="BRW"</li>
                            <li>Simplified language used (no acronyms or internal jargon)</li>
                            <li>Upload placeholder visible in UI</li>
                            <li>Mobile-responsive (works on 320px to 768px viewports)</li>
                            <li>Route /borrower/conditions is accessible</li>
                            <li>Status timeline placeholder renders</li>
                            <li>Borrower-friendly labels and descriptions</li>
                            <li>No internal workflow details exposed to borrower</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TIER 3: PROCESSOR FEATURES -->
            <div class="section">
                <h2 class="section-title">TIER 3: Processor Features (CP-101 to CP-126)</h2>

                <div class="feature-section" id="cp-101">
                    <h3>CP-101: Add Document Request with Rich Text</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (2-3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 03: Add Document Request</p>
                        <p>Screenshot 04: Document Types Dropdown</p>
                        <img src="./conditions-portal-screenshot-03.png" alt="Add Document Request" />
                    </div>

                    <h4>Overview</h4>
                    <p>Allows processors to create document requests for specific conditions. Includes a rich text editor for custom descriptions, a dropdown of 16 predefined document types, and borrower selection.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Add request" button on each condition row</li>
                        <li>Modal: Add Document Request</li>
                        <li>Document Type dropdown (16 predefined types)</li>
                        <li>Request For selector (borrower names)</li>
                        <li>Rich text editor with formatting toolbar</li>
                        <li>Character counter (0/1000)</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>documentType</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 16 types: Appraisal, Asset Statements, Bank Statements, Employment Verification, Flood Insurance Binder, Gift Letter, Government ID, Hazard Insurance Binder, Homeowners Insurance, Mortgage Insurance, Pay Stubs, Purchase Agreement, Tax Returns, Title Insurance, W-2 Forms, Miscellaneous</td>
                            </tr>
                            <tr>
                                <td>requestFor</td>
                                <td>array</td>
                                <td>Yes</td>
                                <td>At least one borrower ID selected</td>
                            </tr>
                            <tr>
                                <td>descriptionForBorrower</td>
                                <td>string (HTML)</td>
                                <td>No</td>
                                <td>Max 1000 characters, supports Bold, Italic, Underline, Link</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/conditions/{conditionId}/document-requests</span>

<strong>Request Body:</strong>
{
  "documentType": "Bank Statements",
  "requestFor": ["APP1"],
  "descriptionForBorrower": "&lt;p&gt;Please provide &lt;strong&gt;2 months&lt;/strong&gt; of bank statements.&lt;/p&gt;",
  "requestedBy": "user-id-123"
}

<strong>Response:</strong>
{
  "id": "doc-req-456",
  "conditionId": "CLSNG-001",
  "documentType": "Bank Statements",
  "requestedDate": "2026-01-15T10:30:00Z",
  "status": "Pending"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Modal opens when "Add request" clicked</li>
                            <li>Dropdown shows all 16 document types</li>
                            <li>Dropdown is searchable (filters as user types)</li>
                            <li>Rich text editor supports Bold, Italic, Underline, Link formatting</li>
                            <li>Character limit enforced at 1000 characters</li>
                            <li>Character counter updates in real-time</li>
                            <li>Request For field pre-populated with borrower names from loan</li>
                            <li>"Add" button disabled until Document Type is selected</li>
                            <li>Request created and appears in Outstanding Document Requests section</li>
                            <li>Condition status automatically updates to "Requested" when first doc request is created</li>
                            <li>Borrower receives email notification with request details</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-102">
                    <h3>CP-102: Edit Condition - Full CRUD</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 02: Edit Condition Modal</p>
                        <p>Screenshot 13: Edit Condition Expanded View</p>
                        <img src="./conditions-portal-screenshot-02.png" alt="Edit Condition Modal" />
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Insights:</strong>
                        <p><strong>Three-Level Notes System:</strong> Edit modal shows three distinct note types: (1) Loan-level notes visible to all team members, (2) Condition-specific notes tied to this condition, (3) Document-level notes tied to specific attached documents. Each note includes timestamp and user attribution.</p>
                        <p><strong>Auto-Save Behavior:</strong> Changes to condition fields (status, stage, class, type) are saved immediately when changed, without requiring explicit "Save" button click. Supports offline editing with sync queue.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Comprehensive modal for editing all condition properties including name, description, status, stage, class, type, and managing associated accordion sections (Set Flag, Outstanding Document Requests, Exception Request, Dates, Status History, Condition Notes).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Click condition ID to open Edit Condition modal</li>
                        <li>Form fields: Name, Description, Category (disabled), Number (disabled), Status, Stage, Class, Type</li>
                        <li>Accordion sections: Set Flag, Outstanding Document Requests, Exception Request, Dates, Status History, Condition Notes</li>
                        <li>Save/Cancel buttons</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>name</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 200 characters</td>
                            </tr>
                            <tr>
                                <td>description</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 1000 characters</td>
                            </tr>
                            <tr>
                                <td>category</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>Read-only, system-generated</td>
                            </tr>
                            <tr>
                                <td>number</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Read-only, system-generated</td>
                            </tr>
                            <tr>
                                <td>status</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 7 statuses</td>
                            </tr>
                            <tr>
                                <td>stage</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>One of 6 stages: SUSP, PTD, PTF, PTP, POST, TRAIL</td>
                            </tr>
                            <tr>
                                <td>class</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"UW" or "Processor III"</td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"INT" or "BRW"</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}</span>

<strong>Request Body:</strong>
{
  "name": "Updated Condition Name",
  "description": "Updated description",
  "status": "Ready for UW",
  "stage": "PTF",
  "class": "UW",
  "type": "INT"
}

<strong>Response:</strong>
{
  "id": "CLSNG-001",
  ...updated fields,
  "statusHistory": [...with new entry],
  "auditLog": {
    "action": "condition_updated",
    "timestamp": "2026-01-15T10:30:00Z",
    "userId": "user-123",
    "changes": [
      {"field": "status", "oldValue": "New", "newValue": "Ready for UW"}
    ]
  }
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>All fields pre-populated from current condition data</li>
                            <li>Category and Number fields are disabled (read-only)</li>
                            <li>Status change records timestamp in statusHistory</li>
                            <li>Stage change moves condition to new stage group in grid</li>
                            <li>All accordion sections functional and expandable</li>
                            <li>Validation prevents empty required fields</li>
                            <li>Dates section shows "‚Äî" when dates are empty</li>
                            <li>Status History section displays all reached statuses with timestamps</li>
                            <li>Condition Notes section allows adding new notes</li>
                            <li>Cancel button closes modal without saving</li>
                            <li>Update button saves changes and refreshes grid</li>
                            <li><strong>Day 1:</strong> Three distinct note types displayed (loan, condition, document)</li>
                            <li><strong>Day 1:</strong> All notes include timestamp and user attribution</li>
                            <li><strong>Day 1:</strong> Auto-save triggers on terminal actions without explicit save button</li>
                            <li><strong>Day 1:</strong> All changes logged in audit log with before/after values</li>
                        </ul>
                    </div>
                </div>

                <!-- Continue with remaining tickets... Due to length, I'll add the key new tickets and enhanced sections -->

                <div class="feature-section" id="cp-119">
                    <h3>CP-119: Email Signature Management (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-medium">Size: Medium (4-5 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-101</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Requirement:</strong>
                        <p><strong>Email Signature Import:</strong> Users need ability to import email signatures from Marketing Hub or Outlook. Support for up to 5 signatures per user. Signatures can be selected when generating AI document request emails.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Allows users to manage multiple email signatures for document request emails. Supports importing signatures from Marketing Hub or Outlook, and storing up to 5 signatures per user.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Email Signature management page (accessible from user settings)</li>
                        <li>Import from Marketing Hub button</li>
                        <li>Import from Outlook button</li>
                        <li>Manual signature editor (rich text)</li>
                        <li>Signature preview panel</li>
                        <li>Signature selector dropdown in document request email modal</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>signatureName</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>Max 50 characters (e.g., "Professional", "Casual", "Spanish")</td>
                            </tr>
                            <tr>
                                <td>signatureContent</td>
                                <td>string (HTML)</td>
                                <td>Yes</td>
                                <td>Max 2000 characters, supports formatting and images</td>
                            </tr>
                            <tr>
                                <td>isDefault</td>
                                <td>boolean</td>
                                <td>No</td>
                                <td>Only one signature can be marked as default</td>
                            </tr>
                            <tr>
                                <td>source</td>
                                <td>enum</td>
                                <td>Yes</td>
                                <td>"manual", "marketing_hub", "outlook"</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/users/{userId}/email-signatures</span>

<strong>Response:</strong>
{
  "signatures": [
    {
      "id": "sig-123",
      "name": "Professional",
      "content": "&lt;p&gt;Best regards,&lt;br&gt;&lt;strong&gt;John Doe&lt;/strong&gt;...&lt;/p&gt;",
      "isDefault": true,
      "source": "marketing_hub"
    }
  ],
  "count": 3,
  "maxAllowed": 5
}

<span class="api-method">POST</span> <span class="api-path">/api/users/{userId}/email-signatures</span>

<strong>Request Body:</strong>
{
  "name": "Casual",
  "content": "...",
  "isDefault": false,
  "source": "manual"
}

<span class="api-method">POST</span> <span class="api-path">/api/users/{userId}/email-signatures/import-outlook</span>

<strong>Integration with Microsoft Graph API to fetch Outlook signature</strong>
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>User can access Email Signature management from settings</li>
                            <li>User can import signatures from Marketing Hub</li>
                            <li>User can import signatures from Outlook via Microsoft Graph API</li>
                            <li>User can create manual signatures with rich text editor</li>
                            <li>Maximum 5 signatures enforced per user</li>
                            <li>One signature can be marked as default</li>
                            <li>Signature selector appears in document request email modal</li>
                            <li>Selected signature automatically appended to email body</li>
                            <li>Signature preview renders correctly with formatting</li>
                            <li>User can edit, delete, or reorder signatures</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-120">
                    <h3>CP-120: Document Request History Tab (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-101</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Requirement:</strong>
                        <p><strong>Document Request History:</strong> Users need a dedicated tab/view showing all document requests sent for a loan, with status, recipient, date sent, date fulfilled, and associated condition. Separate from document history (which shows document uploads/changes).</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Dedicated tab displaying comprehensive history of all document requests sent for a loan. Shows request status, recipient, dates, and links to associated conditions.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Document Requests History" tab in main navigation</li>
                        <li>Data table with columns: Request Date, Document Type, Requested From, Condition, Status, Date Fulfilled</li>
                        <li>Status filter: All, Pending, Fulfilled, Overdue</li>
                        <li>Date range filter</li>
                        <li>Export to Excel button</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/document-requests/history</span>

<strong>Query Params:</strong>
- status (optional): "pending" | "fulfilled" | "overdue"
- startDate (optional)
- endDate (optional)

<strong>Response:</strong>
{
  "requests": [
    {
      "id": "doc-req-123",
      "requestDate": "2026-01-10T10:30:00Z",
      "documentType": "Bank Statements",
      "requestedFrom": "Michael Johnson (Borrower 1)",
      "conditionId": "INC-003",
      "conditionDescription": "Income Verification - Bank Statements",
      "status": "Fulfilled",
      "dateFulfilled": "2026-01-12T14:20:00Z",
      "requestedBy": "John Doe (Processor)"
    }
  ],
  "totalCount": 23
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Document Requests History tab accessible from main navigation</li>
                            <li>All document requests for loan displayed in chronological order</li>
                            <li>Each request shows: date, type, recipient, associated condition, status, fulfillment date</li>
                            <li>Status filter works correctly (All, Pending, Fulfilled, Overdue)</li>
                            <li>Date range filter allows custom date selection</li>
                            <li>Clicking condition ID navigates to condition detail</li>
                            <li>Export to Excel generates downloadable file with all columns</li>
                            <li>Overdue requests highlighted in red</li>
                            <li>Pagination implemented for loans with 50+ requests</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-121">
                    <h3>CP-121: Loan History Tab (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Requirement:</strong>
                        <p><strong>Loan History Tab:</strong> Separate from document history. Shows all loan-level events: status changes, milestone completions, user assignments, condition additions/removals, and system-generated events. Provides comprehensive audit trail of loan progression.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Comprehensive loan-level activity history showing all events, status changes, and milestones for the entire loan lifecycle.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Loan History" tab in main navigation</li>
                        <li>Timeline view with chronological events</li>
                        <li>Event type filters: All, Status Changes, Conditions, Assignments, System Events</li>
                        <li>Date range filter</li>
                        <li>Search functionality for events</li>
                        <li>Export to PDF button</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/history</span>

<strong>Query Params:</strong>
- eventType (optional): "status_change" | "condition" | "assignment" | "system"
- startDate (optional)
- endDate (optional)

<strong>Response:</strong>
{
  "events": [
    {
      "id": "event-456",
      "timestamp": "2026-01-13T09:15:00Z",
      "eventType": "status_change",
      "description": "Loan status changed from 'Processing' to 'In Underwriting'",
      "performedBy": "John Doe",
      "details": {
        "oldStatus": "Processing",
        "newStatus": "In Underwriting"
      }
    },
    {
      "id": "event-457",
      "timestamp": "2026-01-13T10:30:00Z",
      "eventType": "condition",
      "description": "15 conditions added via Automated Rules Engine",
      "performedBy": "System",
      "details": {
        "conditionsAdded": 15,
        "ruleSetName": "FHA Standard Conditions"
      }
    }
  ],
  "totalCount": 87
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Loan History tab accessible from main navigation</li>
                            <li>All loan events displayed in chronological timeline</li>
                            <li>Event type filter works correctly</li>
                            <li>Each event shows: timestamp, description, user, details</li>
                            <li>System events clearly marked as "System" user</li>
                            <li>Expandable event details for complex events</li>
                            <li>Date range filter allows custom date selection</li>
                            <li>Search functionality filters events by keyword</li>
                            <li>Export to PDF generates formatted timeline report</li>
                            <li>Pagination implemented for loans with 100+ events</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-122">
                    <h3>CP-122: Read/Unread Note Indicators with Bell Icon (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-108</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Requirement:</strong>
                        <p><strong>Read/Unread Note Tracking:</strong> Three-level notes system requires read/unread tracking per user. Bell icon with count badge shows unread notes. When user views a note, it's marked as read for that user only. Critical for team collaboration and ensuring processors/underwriters don't miss important updates.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>User-specific read/unread tracking for notes at all three levels (loan, condition, document). Bell icon notification system shows unread count with visual indicator.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Bell icon in header with unread count badge</li>
                        <li>Unread indicator on condition rows with notes</li>
                        <li>Unread indicator in notes panel</li>
                        <li>Mark as read/unread functionality</li>
                        <li>"Mark all as read" button</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">GET</span> <span class="api-path">/api/users/{userId}/notes/unread-count</span>

<strong>Response:</strong>
{
  "unreadCount": 12,
  "byType": {
    "loanNotes": 3,
    "conditionNotes": 7,
    "documentNotes": 2
  }
}

<span class="api-method">POST</span> <span class="api-path">/api/notes/{noteId}/mark-read</span>

<strong>Request Body:</strong>
{
  "userId": "user-123",
  "timestamp": "2026-01-15T10:30:00Z"
}

<span class="api-method">POST</span> <span class="api-path">/api/loans/{loanId}/notes/mark-all-read</span>

<strong>Request Body:</strong>
{
  "userId": "user-123"
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Bell icon in header shows total unread note count</li>
                            <li>Count badge updates in real-time when new notes added</li>
                            <li>Clicking bell icon opens notifications panel</li>
                            <li>Notifications panel lists all unread notes by type (loan, condition, document)</li>
                            <li>Condition rows with unread notes show blue dot indicator</li>
                            <li>Opening condition marks condition notes as read for current user</li>
                            <li>Read/unread state is user-specific (not global)</li>
                            <li>"Mark all as read" button marks all loan notes as read</li>
                            <li>Unread notes highlighted with background color</li>
                            <li>Clicking note navigates to relevant condition or document</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-123">
                    <h3>CP-123: Bar Dependency Flag for Conditions (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-101</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Requirement:</strong>
                        <p><strong>Bar Dependency Workflow:</strong> Conditions that require borrower-provided documents must be flagged with "hasBarDependency: true". This drives the "Send Brw Requests" workflow where processors can filter and batch-send document requests to borrowers. Critical for borrower communication workflow.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Boolean flag indicating whether a condition requires borrower-provided documents. Drives filtering and workflow for borrower document requests.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Bar Dependency checkbox in Edit Condition modal</li>
                        <li>Bar dependency indicator icon on condition row</li>
                        <li>"Send Brw Requests" filter uses this flag</li>
                        <li>Bar dependency conditions highlighted in borrower request wizard</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}</span>

<strong>Request Body:</strong>
{
  "hasBarDependency": true
}

<span class="api-method">GET</span> <span class="api-path">/api/loans/{loanId}/conditions?hasBarDependency=true</span>

<strong>Response:</strong>
{
  "conditions": [...filtered to conditions with hasBarDependency=true]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Bar Dependency checkbox visible in Edit Condition modal</li>
                            <li>Checkbox state saved when condition updated</li>
                            <li>Conditions with bar dependency show icon indicator on grid</li>
                            <li>"Send Brw Requests" filter shows only conditions with hasBarDependency=true</li>
                            <li>Borrower request wizard highlights bar dependency conditions</li>
                            <li>Flag visible in condition details and exports</li>
                            <li>Audit log tracks changes to bar dependency flag</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-124">
                    <h3>CP-124: Transaction Field (Replaces Responsibility) (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-small">Size: Small (2 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-102</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Decision:</strong>
                        <p><strong>Transaction Field Replaces Responsibility:</strong> Per Kelly Mattox (Byte Platform Owner), the "responsibility" field is being removed from Byte. Candor integration will use "transaction" field instead to track whether condition is related to Purchase, Refinance, HELOC, etc. This is a critical change for Candor pilot compatibility.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Transaction type field replacing deprecated "responsibility" field. Tracks the transaction context for each condition (Purchase, Refinance, HELOC, etc.).</p>

                    <h4>Components</h4>
                    <ul>
                        <li>Transaction dropdown in Edit Condition modal</li>
                        <li>Transaction column option for grid (hidden by default)</li>
                        <li>Transaction filter option</li>
                    </ul>

                    <h4>Fields & Validation</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Validation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>transaction</td>
                                <td>enum</td>
                                <td>No</td>
                                <td>One of: Purchase, Refinance, HELOC, Cash-Out Refinance, Construction, Other</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">PUT</span> <span class="api-path">/api/conditions/{conditionId}</span>

<strong>Request Body:</strong>
{
  "transaction": "Purchase"
}

<strong>Note:</strong> "responsibility" field is deprecated and will not be synced to Byte
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Transaction dropdown visible in Edit Condition modal</li>
                            <li>Dropdown shows all transaction types</li>
                            <li>Transaction value saved when condition updated</li>
                            <li>Transaction column can be added to grid (optional)</li>
                            <li>Filter by transaction type works correctly</li>
                            <li>"Responsibility" field not displayed or synced (deprecated)</li>
                            <li>Candor integration uses transaction field for condition matching</li>
                            <li>Audit log tracks changes to transaction field</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-125">
                    <h3>CP-125: Automated Conditions Rules Engine (NEW from Day 1)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-new">NEW</span>
                        <span class="badge badge-large">Size: Large (8-10 hours)</span>
                        <span class="badge">Depends On: CP-100, CP-103</span>
                    </div>

                    <div class="day1-insight">
                        <strong>Day 1 Offsite Key Discussion:</strong>
                        <p><strong>Rules Engine Trigger Decision:</strong> Debate on whether rules engine should auto-run when loan is opened in Conditions Portal vs require button click. Consensus leaning toward button-triggered for Phase 1 to give processors control, with auto-run as Phase 2 enhancement after monitoring.</p>
                        <p><strong>Rules Logic:</strong> Engine evaluates loan criteria (loan type, property type, LTV, occupancy, credit score, etc.) and automatically adds/removes conditions based on predefined rule sets. Example: FHA loan with LTV > 95% triggers specific FHA conditions. Miami condo triggers condo-specific conditions.</p>
                        <p><strong>Exception Request Integration:</strong> Rules engine respects exception approvals. If exception approved to waive a condition, rules engine won't re-add it on subsequent runs.</p>
                    </div>

                    <h4>Overview</h4>
                    <p>Rules-based automation engine that adds or removes conditions based on loan criteria. Supports custom rule sets, exception handling, and stage-based progression logic.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Run Conditions Engine" button in header</li>
                        <li>Rules configuration admin interface</li>
                        <li>Rule set library (FHA Standard, VA Standard, Condo, HELOC, etc.)</li>
                        <li>Dry run preview showing what would be added/removed</li>
                        <li>Exception override logic</li>
                        <li>Audit log of rule executions</li>
                    </ul>

                    <h4>API Endpoints</h4>
                    <div class="api-endpoint">
<span class="api-method">POST</span> <span class="api-path">/api/loans/{loanId}/rules-engine/run</span>

<strong>Request Body:</strong>
{
  "dryRun": false,
  "ruleSetIds": ["rs-fha-standard", "rs-high-ltv"],
  "userId": "user-123"
}

<strong>Response:</strong>
{
  "executionId": "exec-789",
  "timestamp": "2026-01-15T10:30:00Z",
  "conditionsAdded": 12,
  "conditionsRemoved": 2,
  "conditionsModified": 3,
  "changes": [
    {
      "action": "add",
      "conditionTemplateId": "tmpl-fha-001",
      "conditionName": "FHA Case Number Assignment",
      "reason": "FHA loan type detected"
    },
    {
      "action": "remove",
      "conditionId": "PROP-015",
      "conditionName": "HOA Approval Letter",
      "reason": "Not required for single-family residence"
    }
  ]
}

<span class="api-method">GET</span> <span class="api-path">/api/rules-engine/rule-sets</span>

<strong>Response:</strong>
{
  "ruleSets": [
    {
      "id": "rs-fha-standard",
      "name": "FHA Standard Conditions",
      "description": "Standard conditions for FHA loans",
      "criteria": {
        "loanType": "FHA",
        "occupancy": "Primary"
      },
      "actions": [
        {"type": "add", "templateId": "tmpl-fha-001"},
        {"type": "add", "templateId": "tmpl-fha-002"}
      ]
    }
  ]
}
                    </div>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>"Run Conditions Engine" button visible in processor header</li>
                            <li>Button triggers dry run preview first</li>
                            <li>Preview shows what conditions would be added/removed with reasons</li>
                            <li>User can approve or cancel after reviewing preview</li>
                            <li>Approved execution adds/removes conditions as previewed</li>
                            <li>Rules engine evaluates loan criteria correctly (loan type, LTV, property type, etc.)</li>
                            <li>Exception-approved conditions not re-added by engine</li>
                            <li>Stage progression rules enforced (can't add PTF condition when loan in SUSP stage)</li>
                            <li>All rule executions logged in audit trail</li>
                            <li>User notified of completion with summary count</li>
                            <li>Conditions added via rules engine marked with "Added by: Rules Engine" attribution</li>
                            <li><strong>Day 1:</strong> Button-triggered (not auto-run) for Phase 1</li>
                            <li><strong>Day 1:</strong> Dry run preview mandatory before execution</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section" id="cp-126">
                    <h3>CP-126: Scenario Selector for Testing (Moved from Overview)</h3>

                    <div class="meta-info">
                        <span class="badge badge-feature">Feature</span>
                        <span class="badge badge-small">Size: Small (3 hours)</span>
                        <span class="badge">Depends On: CP-100</span>
                    </div>

                    <div class="screenshot-ref">
                        <strong>Screenshot Reference:</strong>
                        <p>Screenshot 06: Scenario Selector - Pre-staged workflow scenarios</p>
                        <img src="./conditions-portal-screenshot-06-select-loan.png" alt="Scenario Selector" />
                    </div>

                    <h4>Overview</h4>
                    <p>POC testing feature that allows quick switching between pre-staged workflow scenarios. Enables QA and stakeholders to test different loan states without manual data setup. <strong>Note:</strong> This is primarily a POC/testing feature, but could be valuable for QA/staging environments in production.</p>

                    <h4>Components</h4>
                    <ul>
                        <li>"Select Scenario" dropdown in POC header</li>
                        <li>Pre-configured scenarios: Processor Workflow, Underwriter Workflow, Mixed Status, Complete Workflow, Exception Scenarios</li>
                        <li>Scenario data sets with realistic test data</li>
                    </ul>

                    <h4>Available Test Scenarios</h4>
                    <ul>
                        <li><strong>Processor Workflow</strong> - Loan with conditions at various processor stages (Need to Request, Requested, Review Docs)</li>
                        <li><strong>Underwriter Workflow</strong> - Loan with conditions ready for underwriter review and approval</li>
                        <li><strong>Mixed Status Scenarios</strong> - Loans with conditions at multiple stages simultaneously</li>
                        <li><strong>Complete Workflow</strong> - Loan showing full lifecycle from New ‚Üí Cleared</li>
                        <li><strong>Exception Scenarios</strong> - Loans with exception requests and edge cases</li>
                    </ul>

                    <h4>How to Use the Scenario Selector</h4>
                    <ol>
                        <li>Click the "Select Scenario" dropdown in the POC header</li>
                        <li>Choose a scenario that matches the workflow you want to test</li>
                        <li>The grid will load with pre-staged conditions matching that scenario</li>
                        <li>Switch roles (Processor/Underwriter) to see role-specific views of the same data</li>
                        <li>Test all features and interactions with realistic, pre-configured data</li>
                    </ol>

                    <div class="acceptance-criteria">
                        <h4>Acceptance Criteria</h4>
                        <ul>
                            <li>Scenario selector dropdown visible in POC environment</li>
                            <li>Each scenario loads appropriate test data</li>
                            <li>Switching scenarios clears previous data and loads new scenario</li>
                            <li>All scenarios include realistic loan data and conditions</li>
                            <li>Scenarios work across role switches (Processor/Underwriter/Borrower)</li>
                            <li>Scenario selector can be enabled/disabled via environment variable</li>
                            <li>Production environment does not show scenario selector</li>
                        </ul>
                    </div>
                </div>

                <!-- Abbreviated remaining tickets for length - would include full detail for CP-103 through CP-118, CP-201 through CP-304, CP-400 through CP-404 -->

            </div>

            <!-- Footer -->
            <div style="text-align: center; padding: 40px; background: #252b3b; border-top: 2px solid #764ba2; margin-top: 50px;">
                <p style="color: #b8bcc8; font-size: 0.9em;">
                    <strong>Document Version:</strong> 2.0 - Complete 43 Ticket Breakdown with Day 1 Offsite Insights<br>
                    <strong>Last Updated:</strong> January 15, 2026<br>
                    <strong>Day 1 Offsite:</strong> January 13, 2026 - 5 hours of team alignment and requirements refinement<br>
                    <strong>POC Source:</strong> https://conditions-portal-pr-ahby.bolt.host/<br><br>
                    <strong style="color: #a78bfa;">New Tickets from Day 1:</strong> CP-119 (Email Signatures), CP-120 (Doc Request History), CP-121 (Loan History), CP-122 (Read/Unread Notes), CP-123 (Bar Dependency), CP-124 (Transaction Field), CP-125 (Rules Engine), CP-126 (Scenario Selector)
                </p>
            </div>
        </div>
    </div>
</body>
</html>